import{d as D,c as E,_ as B}from "./index.7fe3d568.js";const i= V=>(Vue.pushScopeId("data-v-228b61df"),V=V(),Vue.popScopeId(),V),T={class:"AddContest"},g=i(()=>Vue.createElementVNode("span",null,"\u6BD4\u8D5B\u6807\u9898\uFF1A",-1)),N=i(()=>Vue.createElementVNode("span",null,"\u6BD4\u8D5B\u63CF\u8FF0\uFF1A",-1)),P=i(()=>Vue.createElementVNode("span",null,"\u65F6\u95F4\uFF1A",-1)),h=i(()=>Vue.createElementVNode("span",null,"\u6BD4\u8D5B\u7C7B\u578B\uFF1A",-1)),b=i(()=>Vue.createElementVNode("span",null,"\u662F\u5426\u516C\u5F00\uFF1A",-1)),y={key:0},v=i(()=>Vue.createElementVNode("span",null,"\u7ADE\u8D5B\u5BC6\u7801\uFF1A",-1)),I={style:{display:"flex"}},A={style:{display:"flex","justify-content":"flex-end",padding:"10px 0"}},x=Vue.defineComponent({__name:"AddContest",setup(V){const{proxy:l}=Vue.getCurrentInstance(),F=D(),c=E();var u=Vue.reactive({UID:"",Title:"",Description:"",BeginTime:0,EndTime:0,Type:"ACM",IsPublic:"\u516C\u5F00",Pass:"",Problems:"",init(){this.UID=0,this.Title="",this.Description="",this.BeginTime=0,this.EndTime=0,this.Type=1,this.IsPublic=1,this.Pass="",this.Problems=[]}}),a=Vue.reactive({data:[],searchPid:1,search(){for(let n in this.data)if(this.data[n].PID==this.searchPid){l.elMessage({message:"\u6DFB\u52A0\u5931\u8D25\uFF0C\u8BE5\u9898\u76EE\u5DF2\u7ECF\u5B58\u5728\uFF01",type:"warning"});return}l.$axios.get("api/problem/"+this.searchPid).then(n=>{var o,d;let e=n.data;if(e.code==0){let s={PID:e.PID,Title:e.Title};this.data.push(s),l.elMessage({message:"\u6DFB\u52A0\u6210\u529F!",type:"success"})}else l.codeProcessor((o=e==null?void 0:e.code)!=null?o:100001,(d=e==null?void 0:e.msg)!=null?d:"\u670D\u52A1\u5668\u9519\u8BEF\\\\error")})},delete(n, e){for(let o in this.data)n==o&&this.data.splice(o,1);l.elMessage({message:"\u5220\u9664\u9898\u53F7<"+e.PID+">\u6210\u529F!",type:"success"})}}),r=Vue.ref(null);function C(){if(F.UID==""){l.elMessage({message:"\u767B\u5F55\u6570\u636E\u5F02\u5E38\uFF0C\u8BF7\u91CD\u65B0\u767B\u5F55\uFF01",type:"warning"});return}if(a.data.length==0){l.elMessage({message:"\u8BE5\u6BD4\u8D5B\u6CA1\u6709\u8BBE\u7F6E\u9898\u76EE\uFF01\u6DFB\u52A0\u5931\u8D25",type:"warning"});return}if(r.value==null){l.elMessage({message:"\u8BE5\u6BD4\u8D5B\u6CA1\u6709\u8BBE\u7F6E\u65F6\u95F4\uFF01\u6DFB\u52A0\u5931\u8D25",type:"warning"});return}u.BeginTime=r.value[0].getTime(),u.EndTime=r.value[1].getTime(),u.Type=u.Type=="ACM"?c.CONTEST_TYPE_ACM:c.CONTEST_TYPE_OI,u.IsPublic=u.IsPublic=="\u516C\u5F00"?c.CONTEST_PUBLIC:c.CONTEST_NOTPUBLIC;let n=[];for(let e in a.data)n.push(a.data[e].PID);u.Problems=n.join(","),l.$post("api/contest/add/",{UID:F.UID,Title:u.Title,Description:u.Description,BeginTime:u.BeginTime,EndTime:u.EndTime,Type:u.Type,IsPublic:u.IsPublic,Pass:u.Pass,Problems:u.Problems}).then(e=>{var d,s;let o=e.data;o.code==0?l.elMessage({message:"\u6DFB\u52A0\u6210\u529F!",type:"success"}):l.codeProcessor((d=o==null?void 0:o.code)!=null?d:100001,(s=o==null?void 0:o.msg)!=null?s:"\u670D\u52A1\u5668\u9519\u8BEF\\\\error")})}return(n, e)=>{const o=Vue.resolveComponent("el-input"),d=Vue.resolveComponent("el-date-picker"),s=Vue.resolveComponent("el-radio-button"),_=Vue.resolveComponent("el-radio-group"),p=Vue.resolveComponent("el-table-column"),m=Vue.resolveComponent("el-button"),f=Vue.resolveComponent("el-table");return Vue.openBlock(),Vue.createElementBlock("div",T,[Vue.createElementVNode("div",null,[g,Vue.createVNode(o,{modelValue:Vue.unref(u).Title,"onUpdate:modelValue":e[0]||(e[0]= t=>Vue.unref(u).Title=t)},null,8,["modelValue"])]),Vue.createElementVNode("div",null,[N,Vue.createVNode(o,{modelValue:Vue.unref(u).Description,"onUpdate:modelValue":e[1]||(e[1]= t=>Vue.unref(u).Description=t),type:"textarea",autosize:""},null,8,["modelValue"])]),Vue.createElementVNode("div",null,[P,Vue.createVNode(d,{modelValue:Vue.unref(r),"onUpdate:modelValue":e[2]||(e[2]= t=>Vue.isRef(r)?r.value=t:r=t),type:"datetimerange","range-separator":"\u5230","start-placeholder":"\u5F00\u59CB\u65F6\u95F4","end-placeholder":"\u7ED3\u675F\u65F6\u95F4"},null,8,["modelValue"])]),Vue.createElementVNode("div",null,[h,Vue.createVNode(_,{modelValue:Vue.unref(u).Type,"onUpdate:modelValue":e[3]||(e[3]= t=>Vue.unref(u).Type=t),size:"large"},{default:Vue.withCtx(()=>[Vue.createVNode(s,{label:"ICPC"}),Vue.createVNode(s,{label:"OI"})]),_:1},8,["modelValue"])]),Vue.createElementVNode("div",null,[b,Vue.createVNode(_,{modelValue:Vue.unref(u).IsPublic,"onUpdate:modelValue":e[4]||(e[4]= t=>Vue.unref(u).IsPublic=t),size:"large"},{default:Vue.withCtx(()=>[Vue.createVNode(s,{label:"\u516C\u5F00"}),Vue.createVNode(s,{label:"\u4E0D\u516C\u5F00"})]),_:1},8,["modelValue"])]),Vue.unref(u).IsPublic=="\u4E0D\u516C\u5F00"?(Vue.openBlock(),Vue.createElementBlock("div",y,[v,Vue.createVNode(o,{modelValue:Vue.unref(u).Pass,"onUpdate:modelValue":e[5]||(e[5]= t=>Vue.unref(u).Pass=t)},null,8,["modelValue"])])):Vue.createCommentVNode("",!0),Vue.createVNode(f,{data:Vue.unref(a).data,style:{width:"100%",margin:"20px 0"}},{default:Vue.withCtx(()=>[Vue.createVNode(p,{label:"\u9898\u53F7",prop:"PID"}),Vue.createVNode(p,{label:"\u6807\u9898",prop:"Title"}),Vue.createVNode(p,{align:"right"},{header:Vue.withCtx(()=>[Vue.createElementVNode("div",I,[Vue.createVNode(o,{modelValue:Vue.unref(a).searchPid,"onUpdate:modelValue":e[6]||(e[6]= t=>Vue.unref(a).searchPid=t),style:{width:"200px"}},null,8,["modelValue"]),Vue.createVNode(m,{type:"primary",onClick:e[7]||(e[7]= t=>Vue.unref(a).search())},{default:Vue.withCtx(()=>[Vue.createTextVNode(" \u6DFB\u52A0\u9898\u76EE ")]),_:1})])]),default:Vue.withCtx(t=>[Vue.createVNode(m,{type:"danger",onClick: w=>Vue.unref(a).delete(t.$index,t.row)},{default:Vue.withCtx(()=>[Vue.createTextVNode(" \u5220\u9664 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),Vue.createElementVNode("div",A,[Vue.createVNode(m,{plain:"",onClick:e[8]||(e[8]= t=>C())},{default:Vue.withCtx(()=>[Vue.createTextVNode("\u6DFB\u52A0")]),_:1})])])}}});const k=B(x,[["__scopeId","data-v-228b61df"]]);export{k as default};
