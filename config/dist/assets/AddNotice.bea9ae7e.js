import{I as V,e as g,s as _,_ as F}from "./index.7fe3d568.js";const r= a=>(Vue.pushScopeId("data-v-d95cdc4f"),a=a(),Vue.popScopeId(),a),f={class:"addlist"},B=r(()=>Vue.createElementVNode("span",null,"\u516C\u544A\u6807\u9898",-1)),E=r(()=>Vue.createElementVNode("div",{style:{height:"auto"}},[Vue.createElementVNode("span",null,"\u516C\u544A\u5185\u5BB9")],-1)),A={class:"markdown"},v=Vue.defineComponent({__name:"AddNotice",setup(a){const{proxy:l}=Vue.getCurrentInstance();var i={toolbar:["bold","underline","italic","-","strikeThrough","title","sub","sup","quote","unorderedList","orderedList","-","codeRow","code","link","image","table","mermaid","katex","-","revoke","next","save","=","preview","htmlPreview","catalog"]},o=Vue.reactive({Title:"",Content:"",init(){o.Title="",o.Content=""},updateImg: u=>{if(u.length==0){l.elMessage({message:"\u4E0A\u4F20\u5185\u5BB9\u4E3A\u7A7A\uFF01",type:"warning"});return}ElementPlus.ElMessageBox.confirm("\u786E\u5B9A\u4E0A\u4F20\u5417\uFF1F","\u6CE8\u610F",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{u.forEach(e=>{m(e)})})}});function c(){l.$axios.post("/api/notice/",{title:o.Title,content:o.Content}).then(u=>{var s,t;let e=u.data;e.code==0&&l.elMessage({message:"\u6DFB\u52A0\u516C\u544A\u6210\u529F",type:"success"}),l.codeProcessor((s=e==null?void 0:e.code)!=null?s:100001,(t=e==null?void 0:e.msg)!=null?t:"\u670D\u52A1\u5668\u9519\u8BEF\\\\error")})}function m(u){V.problemImageCompress(u).then(e=>{e.code==0&&g.uploadProblemImage(e.data).then(s=>{var n,d;let t=s.data;if(t.code==0){let p=t.ImageURL;o.Content+=`
![](${_}${p})`,l.elMessage({message:`
              <strong>${u.name}\u4E0A\u4F20\u6210\u529F</strong><br/>
              <span>\u5DF2\u538B\u7F29:${(u.size/1024).toFixed(2)}KB->${(e.data.size/1024).toFixed(2)}KB</span>
            `,type:"success",duration:5e3,dangerouslyUseHTMLString:!0})}l.codeProcessor((n=t==null?void 0:t.code)!=null?n:100001,(d=t==null?void 0:t.msg)!=null?d:"\u670D\u52A1\u5668\u9519\u8BEF\\\\error")})})}return(u,e)=>{const s=Vue.resolveComponent("el-input"),t=Vue.resolveComponent("el-button");return Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,[Vue.createElementVNode("div",f,[Vue.createElementVNode("div",null,[B,Vue.createVNode(s,{modelValue:Vue.unref(o).Title,"onUpdate:modelValue":e[0]||(e[0]=n=>Vue.unref(o).Title=n)},null,8,["modelValue"])]),E,Vue.createElementVNode("div",A,[Vue.createVNode(Vue.unref(MdEditorV3),{modelValue:Vue.unref(o).Content,"onUpdate:modelValue":e[1]||(e[1]=n=>Vue.unref(o).Content=n),toolbars:Vue.unref(i).toolbar,"on-upload-img":Vue.unref(o).updateImg},null,8,["modelValue","toolbars","on-upload-img"])])]),Vue.createVNode(t,{class:"addNoticeButton",type:"primary",onClick:e[2]||(e[2]=n=>c())},{default:Vue.withCtx(()=>[Vue.createTextVNode(" \u6DFB \u52A0 ")]),_:1})],64)}}});const x=F(v,[["__scopeId","data-v-d95cdc4f"]]);export{x as default};
