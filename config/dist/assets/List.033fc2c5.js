import{d as b,c as U,_ as $}from "./index.7fe3d568.js";const M= a=>(Vue.pushScopeId("data-v-7f4ad3b2"),a=a(),Vue.popScopeId(),a),R={class:"contest"},z={class:"notFound"},H={class:"infoBox",ref:"infoBox"},q={class:"ArtFont Bold"},j={class:"Title Bold ArtFont"},G={class:"text"},J={class:"text"},K={key:0,class:"addList"},O={class:"functionBox"},Q={class:"text"},W={class:"process"},X={class:"functionBox"},Y={class:"problemList",ref:"problemList"},Z=M(()=>Vue.createElementVNode("div",{class:"nav"},[Vue.createElementVNode("div",{style:{width:"90px"}},"\u5E8F\u53F7"),Vue.createElementVNode("div",{style:{width:"calc(100% - 190px)"}},"\u9898\u76EE"),Vue.createElementVNode("div",{style:{width:"100px"}},"\u901A\u8FC7\u60C5\u51B5")],-1)),ee=["onClick"],te=["onClick"],oe={class:"status"},ue=Vue.defineComponent({__name:"List",setup(a){const{proxy:u}=Vue.getCurrentInstance(),i=b(),D=U();var V=Vue.ref(!0),d=Vue.ref(!0),m=Vue.ref(!1),p=Vue.reactive({contestInfo:null,problemList:null,init(){this.contestInfo&&this.contestInfo.close(),this.problemList&&this.problemList.close(),this.contestInfo=null,this.problemList=null}}),n=Vue.reactive({LID:null,Data:[],UID:"",Title:"",StartTime:null,Problems:"",copy(t){t.Data.forEach(e=>{n.Data.push({Sort:e.Sort,PID:e.PID,Title:e.Ptitle,Aceept:!1})}),n.LID=t.LID,n.UID=t.UID,n.Title=t.Title,n.StartTime=t.StartTime,n.Problems=t.Problems}});function h(t){for(let e in r.SolvedPID)if(r.SolvedPID[e]==t)return!0;return!1}async function B(){let t=u.$route.params.LID;if(n.LID=t,!t){u.elMessage({message:"\u9875\u9762\u8DF3\u8F6C\u5F02\u5E38\uFF0C\u8BF7\u91CD\u8BD5\u3002",type:"error"});return}C(t),L(t),m.value=g()}function g(){return i.isLogin?(i.PermissionMap&D.ListAdminBit)!=0||(i.PermissionMap&D.SuperAdminBit)!=0:!1}var r=Vue.reactive({LID:0,UID:"",solved:0,submited:0,SolvedPID:[],copy(t){r.LID=n.LID,r.UID=i.UID,r.solved=t.Solved,r.submited=t.Submited,r.SolvedPID=t.SolvedPID}});async function C(t){d.value=!0,i.UID!=""&&await u.$get("api/training/user?LID="+t).then(e=>{var s,l;let o=e.data;o.code==0&&(d.value=!1,r.copy(o)),u.codeProcessor((s=o==null?void 0:o.code)!=null?s:100001,(l=o==null?void 0:o.msg)!=null?l:"\u670D\u52A1\u5668\u9519\u8BEF\\\\error")})}async function L(t){V.value=!0,p.init(),p.contestInfo=u.elLoading({node:u.$refs.infoBox}),p.problemList=u.elLoading({node:u.$refs.problemList}),await u.$get("api/training/"+t).then(e=>{var s,l;let o=e.data;o.code==0&&(n.copy(o),V.value=!1),u.codeProcessor((s=o==null?void 0:o.code)!=null?s:100001,(l=o==null?void 0:o.msg)!=null?l:"\u670D\u52A1\u5668\u9519\u8BEF\\\\error")}),p.init()}function F(){if(i.UID==""){u.codeProcessor(100001,"\u7528\u6237\u672A\u767B\u5F55\uFF0C\u8BF7\u5148\u767B\u5F55\\\\error");return}u.$post("/api/training/user/",{UID:i.UID,LID:n.LID}).then(t=>{var o,s;let e=t.data;e.code==0&&(d.value=!1),u.codeProcessor((o=e==null?void 0:e.code)!=null?o:100001,(s=e==null?void 0:e.msg)!=null?s:"\u670D\u52A1\u5668\u9519\u8BEF\\\\error")})}function v(t){u.$router.push({name:"Problem",params:{PID:t}})}function x(){let t=n.LID;u.$router.push({name:"ListRank",params:{LID:t}})}function E(){let t=n.LID;u.$router.push({path:"/Admin/ListEdit/UpdateList",query:{LID:t}})}function N(){if(i.UID==""){u.codeProcessor(100001,"\u7528\u6237\u672A\u767B\u5F55\uFF0C\u8BF7\u5148\u767B\u5F55\\\\error");return}u.$post("/api/training/clone/",{UID:i.UID,LID:n.LID}).then(t=>{var o,s;let e=t.data;e.code==0&&u.$router.push({name:"List",params:{LID:e.LID}}),u.codeProcessor((o=e==null?void 0:e.code)!=null?o:100001,(s=e==null?void 0:e.msg)!=null?s:"\u670D\u52A1\u5668\u9519\u8BEF\\\\error")})}return Vue.onMounted(()=>{B()}),(t, e)=>{const o=Vue.resolveComponent("el-empty"),s=Vue.resolveComponent("el-row"),l=Vue.resolveComponent("el-progress"),k=Vue.resolveComponent("Histogram"),_=Vue.resolveComponent("el-icon"),f=Vue.resolveComponent("el-button"),y=Vue.resolveComponent("DocumentAdd"),S=Vue.resolveComponent("Edit"),A=Vue.resolveComponent("el-divider"),P=Vue.resolveComponent("el-main"),T=Vue.resolveComponent("el-container");return Vue.openBlock(),Vue.createBlock(T,{class:"Main"},{default:Vue.withCtx(()=>[Vue.createVNode(P,{class:"Container"},{default:Vue.withCtx(()=>[Vue.createElementVNode("div",R,[Vue.withDirectives(Vue.createElementVNode("div",z,[Vue.createVNode(o,{description:"\u80A5\u80A0\u62B1\u6B49\uFF0C\u6728\u6709\u627E\u5230\u8BE5\u9898\u5355\uFF0C\u8FD4\u56DE\u91CD\u8BD5\u5427\u3002"})],512),[[Vue.vShow,Vue.unref(V)]]),Vue.unref(V)?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:0},[Vue.createElementVNode("div",H,[Vue.createVNode(s,null,{default:Vue.withCtx(()=>[Vue.createElementVNode("div",q,"\xA0#"+Vue.toDisplayString(Vue.unref(n).LID)+"\xA0",1),Vue.createElementVNode("div",j,Vue.toDisplayString(Vue.unref(n).Title),1)]),_:1}),Vue.createElementVNode("div",G,"\u521B\u5EFA\u8005\uFF1A"+Vue.toDisplayString(Vue.unref(n).UID),1),Vue.createElementVNode("div",J,"\u5F00\u59CB\u65F6\u95F4\uFF1A"+Vue.toDisplayString(Vue.unref(u).Utils.TimeTools.timestampToTime(Vue.unref(n).StartTime)),1),Vue.unref(d)?(Vue.openBlock(),Vue.createElementBlock("div",K,[Vue.createElementVNode("div",O,[Vue.createElementVNode("div",{class:"contestRank cursor_pointer",onClick:e[0]||(e[0]= c=>F())}," \u52A0\u5165\u9898\u5355 ")])])):(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:1},[Vue.createElementVNode("div",Q,"\u5DF2\u89E3\u51B3:"+Vue.toDisplayString(Vue.unref(r).solved)+"/"+Vue.toDisplayString(Vue.unref(n).Data.length),1),Vue.createElementVNode("div",W,[Vue.createVNode(l,{"show-text":!1,"stroke-width":20,percentage:100*Vue.unref(r).solved/Vue.unref(n).Data.length,style:{margin:"20px 0 20px 0"}},null,8,["percentage"])])],64)),Vue.createElementVNode("div",X,[Vue.createVNode(f,{class:"contestButton",onClick:e[1]||(e[1]= c=>x())},{default:Vue.withCtx(()=>[Vue.createVNode(_,{size:"16px"},{default:Vue.withCtx(()=>[Vue.createVNode(k)]),_:1}),Vue.createTextVNode("\xA0\xA0\u6392 \u540D ")]),_:1}),Vue.unref(m)?(Vue.openBlock(),Vue.createBlock(f,{key:0,class:"contestButton",onClick:e[2]||(e[2]= c=>N())},{default:Vue.withCtx(()=>[Vue.createVNode(_,{size:"16px"},{default:Vue.withCtx(()=>[Vue.createVNode(y)]),_:1}),Vue.createTextVNode("\xA0\xA0\u514B \u9686 ")]),_:1})):Vue.createCommentVNode("",!0),Vue.unref(m)?(Vue.openBlock(),Vue.createBlock(f,{key:1,class:"contestButton",onClick:e[3]||(e[3]= c=>E())},{default:Vue.withCtx(()=>[Vue.createVNode(_,{size:"16px"},{default:Vue.withCtx(()=>[Vue.createVNode(S)]),_:1}),Vue.createTextVNode("\xA0\xA0\u7F16 \u8F91 ")]),_:1})):Vue.createCommentVNode("",!0)])],512),Vue.createVNode(A),Vue.createElementVNode("div",Y,[Z,(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(n).Data,(c, I)=>(Vue.openBlock(),Vue.createElementBlock("div",{class:"item",key:I},[Vue.createElementVNode("div",{class:"flag cursor_pointer",onClick: w=>v(c.PID)},Vue.toDisplayString(Vue.unref(u).Utils.TSBaseTools.numberToAlpha(I+1)),9,ee),Vue.createElementVNode("div",{class:"title cursor_pointer",onClick: w=>v(c.PID)},Vue.toDisplayString(c.Title),9,te),Vue.createElementVNode("div",oe,[Vue.createVNode(l,{type:"circle",width:22,"stroke-width":3,percentage:h(c.PID)?100:0,"show-text":!1,style:{margin:"0 10px"},color:"#5E8D00"},null,8,["percentage"])])]))),128))],512)],64))])]),_:1})]),_:1})}}});const se=$(ue,[["__scopeId","data-v-7f4ad3b2"]]);export{se as default};
