import{h as m,_}from"./index.7fe3d568.js";const V=r=>(Vue.pushScopeId("data-v-79ed72b8"),r=r(),Vue.popScopeId(),r),f={class:"addlist"},h=V(()=>Vue.createElementVNode("span",null,"\u6BD4\u8D5B\u6807\u9898\uFF1A",-1)),D=V(()=>Vue.createElementVNode("span",null,"\u6BD4\u8D5B\u63CF\u8FF0\uFF1A",-1)),g={class:"count"},F=V(()=>Vue.createElementVNode("div",{style:{display:"flex"}},null,-1)),x={style:{display:"flex","justify-content":"flex-end",padding:"10px 0"}},y=Vue.defineComponent({__name:"AddList",setup(r){const{proxy:l}=Vue.getCurrentInstance(),d=200;var t=Vue.reactive({UID:"",Title:"",Description:"",Problems:[],init(){t.UID="",t.Title="",t.Description="",t.Problems=[]}}),a=Vue.reactive({data:[],searchPid:"P1000",search(){if(this.data.length==d){l.elMessage({message:"\u6DFB\u52A0\u5931\u8D25,\u4E00\u4E2A\u9898\u5355\u6700\u591A\u53EA\u80FD\u6DFB\u52A0"+d+"\u9053\u9898\u76EE",type:"warning"});return}for(let o in this.data)if(this.data[o].PID==this.searchPid){l.elMessage({message:"\u6DFB\u52A0\u5931\u8D25\uFF0C\u8BE5\u9898\u76EE\u5DF2\u7ECF\u5B58\u5728\uFF01",type:"warning"});return}l.$axios.get("api/problem/"+this.searchPid).then(o=>{var u,n;let e=o.data;if(e.code==0){let i={PID:e.PID,Title:e.Title};this.data.push(i),l.elMessage({message:"\u6DFB\u52A0\u6210\u529F!",type:"success"})}else l.codeProcessor((u=e==null?void 0:e.code)!=null?u:100001,(n=e==null?void 0:e.msg)!=null?n:"\u670D\u52A1\u5668\u9519\u8BEF\\\\error")})},delete(o,e){for(let u in this.data)o==u&&this.data.splice(u,1);l.elMessage({message:"\u5220\u9664\u9898\u53F7<"+e.PID+">\u6210\u529F!",type:"success"})}});function c(){if(t.Problems=[],a.data.forEach(o=>{t.Problems.push(o.PID)}),t.Title==""){m({message:"\u8BF7\u8F93\u5165\u9898\u5355\u6807\u9898!",type:"warning"});return}l.$post("/api/training/add/",{Title:t.Title,Description:t.Description,Problems:t.Problems.join(",")}).then(o=>{var u,n;let e=o.data;e.code==0?l.elMessage({message:"\u6DFB\u52A0\u6210\u529F!",type:"success"}):l.codeProcessor((u=e==null?void 0:e.code)!=null?u:100001,(n=e==null?void 0:e.msg)!=null?n:"\u670D\u52A1\u5668\u9519\u8BEF\\\\error")})}return(o,e)=>{const u=Vue.resolveComponent("el-input"),n=Vue.resolveComponent("el-table-column"),i=Vue.resolveComponent("el-button"),p=Vue.resolveComponent("el-table");return Vue.openBlock(),Vue.createElementBlock("div",f,[Vue.createElementVNode("div",null,[h,Vue.createVNode(u,{modelValue:Vue.unref(t).Title,"onUpdate:modelValue":e[0]||(e[0]=s=>Vue.unref(t).Title=s)},null,8,["modelValue"])]),Vue.createElementVNode("div",null,[D,Vue.createVNode(u,{modelValue:Vue.unref(t).Description,"onUpdate:modelValue":e[1]||(e[1]=s=>Vue.unref(t).Description=s),type:"textarea",autosize:""},null,8,["modelValue"])]),Vue.createVNode(p,{data:Vue.unref(a).data,style:{width:"100%",margin:"20px 0"}},{default:Vue.withCtx(()=>[Vue.createVNode(n,{label:"\u9898\u53F7",prop:"PID"}),Vue.createVNode(n,{label:"\u6807\u9898",prop:"Title"}),Vue.createVNode(n,{align:"right"},{header:Vue.withCtx(()=>[Vue.createElementVNode("div",g,Vue.toDisplayString(Vue.unref(a).data.length)+"/"+Vue.toDisplayString(d),1),Vue.createVNode(u,{modelValue:Vue.unref(a).searchPid,"onUpdate:modelValue":e[2]||(e[2]=s=>Vue.unref(a).searchPid=s),style:{width:"200px"}},null,8,["modelValue"]),Vue.createVNode(i,{type:"primary",onClick:e[3]||(e[3]=s=>Vue.unref(a).search())},{default:Vue.withCtx(()=>[Vue.createTextVNode(" \u6DFB\u52A0\u9898\u76EE ")]),_:1}),F]),default:Vue.withCtx(s=>[Vue.createVNode(i,{type:"danger",onClick:E=>Vue.unref(a).delete(s.$index,s.row)},{default:Vue.withCtx(()=>[Vue.createTextVNode(" \u5220\u9664 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),Vue.createElementVNode("div",x,[Vue.createVNode(i,{plain:"",onClick:e[4]||(e[4]=s=>c())},{default:Vue.withCtx(()=>[Vue.createTextVNode("\u6DFB\u52A0")]),_:1})])])}}});const v=_(y,[["__scopeId","data-v-79ed72b8"]]);export{v as default};
