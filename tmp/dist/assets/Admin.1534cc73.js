import{d as f,c as A,_}from"./index.de99a551.js";const B={class:"admin"},C={class:"content"},x=Vue.defineComponent({__name:"Admin",setup(E){const{proxy:r}=Vue.getCurrentInstance(),l=f(),s=A();var e=Vue.reactive({Administrator:!1,ProblemAdmin:!1,ContestAdmin:!1,SourceBorwser:!1,ListAdmin:!1,SuperAdmin:!1});function d(){let o=localStorage.getItem("ahutOjToken"),u=localStorage.getItem("ahutOjUserUid");if(!l.isLogin){r.elMessage({message:"\u767B\u5F55\u72B6\u6001\u65E0\u6548!",type:"warning"}),i();return}if(l.UID!=u||!o){r.elMessage({message:"\u767B\u5F55\u8EAB\u4EFD\u9A8C\u8BC1\u4E0D\u901A\u8FC7!",type:"warning"}),i();return}r.$axios.get("api/admin/permission/"+u).then(c=>{var n,a;let t=c.data;t.code==0&&V(t.PermissionMap),r.codeProcessor((n=t==null?void 0:t.code)!=null?n:100001,(a=t==null?void 0:t.msg)!=null?a:"\u670D\u52A1\u5668\u9519\u8BEF\\\\error")})}function V(o){if(o<=3){r.elMessage({message:"\u6743\u9650\u9A8C\u8BC1\u672A\u901A\u8FC7\uFF0C\u4F60\u65E0\u6743\u8BBF\u95EE",type:"error"}),i();return}e.Administrator=!0;let u="<span>\u4F60\u7684\u6743\u9650\u8868:</span><br/>        <span style='color: #00ccff'>\u7BA1\u7406\u5458</span>";(o&s.SuperAdminBit)!=0&&(e.SuperAdmin=!0,e.ProblemAdmin=!0,e.ContestAdmin=!0,e.ListAdmin=!0,e.SourceBorwser=!0),u+=e.SuperAdmin?"<br /><span style='color: #6741d9'>\u8D85\u7EA7\u7BA1\u7406\u5458</span>":"<br /><span style='color: #ff3300'>\u8D85\u7EA7\u7BA1\u7406\u5458</span>",(o&s.ProblemAdminBit)!=0&&(e.ProblemAdmin=!0),u+=e.ProblemAdmin?"<br /><span style='color: #5ebd00'>\u9898\u76EE\u7F16\u8F91</span>":"<br /><span style='color: #ff3300'>\u9898\u76EE\u7F16\u8F91</span>",(o&s.ContestAdminBit)!=0&&(e.ContestAdmin=!0),u+=e.ContestAdmin?"<br /><span style='color: #5ebd00'>\u7ADE\u8D5B\u7F16\u8F91</span>":"<br /><span style='color: #ff3300'>\u7ADE\u8D5B\u7F16\u8F91</span>",(o&s.SourceBorwserBit)!=0&&(e.SourceBorwser=!0),u+=e.SourceBorwser?"<br /><span style='color: #5ebd00'>\u8D44\u6E90\u7BA1\u7406</span>":"<br /><span style='color: #ff3300'>\u8D44\u6E90\u7BA1\u7406</span>",(o&s.ListAdminBit)!=0&&(e.ListAdmin=!0),u+=e.ListAdmin?"<br /><span style='color: #5ebd00'>\u9898\u5355\u7F16\u8F91</span>":"<br /><span style='color: #ff3300'>\u9898\u5355\u7F16\u8F91</span>",r.elNotification({title:"\u6B22\u8FCE\u6765\u5230\u7BA1\u7406\u754C\u9762",message:u,type:"success",duration:3e3,dangerouslyUseHTMLString:!0,offset:100})}function i(){r.$router.replace({path:"Home"})}return Vue.onMounted(()=>{d()}),(o,u)=>{const c=Vue.resolveComponent("el-row"),t=Vue.resolveComponent("el-menu-item"),n=Vue.resolveComponent("router-link"),a=Vue.resolveComponent("el-menu"),m=Vue.resolveComponent("router-view");return Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,[Vue.unref(e).Administrator?(Vue.openBlock(),Vue.createBlock(a,{key:0,class:"adminHeader",mode:"horizontal"},{default:Vue.withCtx(()=>[Vue.createVNode(c,{class:"adminPageFlag"},{default:Vue.withCtx(()=>[Vue.createTextVNode("AHUT OJ \u7BA1\u7406")]),_:1}),Vue.createVNode(n,{"active-class":"selected",to:"/Admin/ProblemEdit"},{default:Vue.withCtx(()=>[Vue.unref(e).ProblemAdmin?(Vue.openBlock(),Vue.createBlock(t,{key:0,index:"1"},{default:Vue.withCtx(()=>[Vue.createTextVNode(" \u9898\u76EE\u7BA1\u7406 ")]),_:1})):Vue.createCommentVNode("",!0)]),_:1}),Vue.createVNode(n,{"active-class":"selected",to:"/Admin/ContestEdit"},{default:Vue.withCtx(()=>[Vue.unref(e).ContestAdmin?(Vue.openBlock(),Vue.createBlock(t,{key:0,index:"2"},{default:Vue.withCtx(()=>[Vue.createTextVNode(" \u7ADE\u8D5B\u7BA1\u7406 ")]),_:1})):Vue.createCommentVNode("",!0)]),_:1}),Vue.unref(e).ListAdmin?(Vue.openBlock(),Vue.createBlock(n,{key:0,"active-class":"selected",to:"/Admin/ListEdit"},{default:Vue.withCtx(()=>[Vue.createVNode(t,{index:"3"},{default:Vue.withCtx(()=>[Vue.createTextVNode(" \u9898\u5355\u7BA1\u7406 ")]),_:1})]),_:1})):Vue.createCommentVNode("",!0),Vue.unref(e).Administrator?(Vue.openBlock(),Vue.createBlock(n,{key:1,"active-class":"selected",to:"/Admin/UserEdit"},{default:Vue.withCtx(()=>[Vue.createVNode(t,{index:"4"},{default:Vue.withCtx(()=>[Vue.createTextVNode(" \u7528\u6237\u7BA1\u7406 ")]),_:1})]),_:1})):Vue.createCommentVNode("",!0),Vue.unref(e).SuperAdmin?(Vue.openBlock(),Vue.createBlock(n,{key:2,"active-class":"selected",to:"/Admin/AdminEdit"},{default:Vue.withCtx(()=>[Vue.createVNode(t,{index:"5"},{default:Vue.withCtx(()=>[Vue.createTextVNode(" \u6743\u9650\u7BA1\u7406 ")]),_:1})]),_:1})):Vue.createCommentVNode("",!0),Vue.unref(e).Administrator?(Vue.openBlock(),Vue.createBlock(n,{key:3,"active-class":"selected",to:"/Admin/NoticeEdit"},{default:Vue.withCtx(()=>[Vue.createVNode(t,{index:"6"},{default:Vue.withCtx(()=>[Vue.createTextVNode(" \u516C\u544A\u7BA1\u7406 ")]),_:1})]),_:1})):Vue.createCommentVNode("",!0)]),_:1})):Vue.createCommentVNode("",!0),Vue.createElementVNode("div",B,[Vue.createElementVNode("div",C,[Vue.createVNode(m,null,{default:Vue.withCtx(({Component:p})=>[Vue.createVNode(Vue.Transition,{"enter-active-class":"animate__animated animate__fadeInUp"},{default:Vue.withCtx(()=>[(Vue.openBlock(),Vue.createBlock(Vue.resolveDynamicComponent(p)))]),_:2},1024)]),_:1})])])],64)}}});const w=_(x,[["__scopeId","data-v-12963fd1"]]);export{w as default};
