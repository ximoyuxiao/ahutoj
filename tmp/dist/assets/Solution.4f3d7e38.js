import{d as x,u as P,s as y,_ as b}from"./index.de99a551.js";const L=C=>(Vue.pushScopeId("data-v-0647f784"),C=C(),Vue.popScopeId(),C),$={class:"solution"},z={class:"left"},M={class:"notFound"},H={class:"topBox"},R={class:"count"},q={class:"userInfo"},j={class:"headImg"},G=["src"],J={class:"info"},K={class:"userName"},O={class:"updateTime"},Q={class:"updateTime"},W={class:"foldCover"},X=["onClick"],Y={class:"status"},Z={class:"left"},ee={class:"thumbsUp"},te=["onClick"],ue=["onClick"],oe={class:"comment"},ne={class:"item"},se={class:"left"},re=["src"],le={class:"right"},ae={class:"userName"},ce={class:"content"},ie={class:"buttom"},Ve=["onClick"],de={class:"time"},me={key:0,class:"notFound"},pe={key:1,class:"pagination"},Ce={class:"myComment"},_e=["onClick"],ge={key:0,class:"pagination"},he={class:"publish"},fe=L(()=>Vue.createElementVNode("h1",null,"\u6807\u9898",-1)),ve=Vue.createStaticVNode('<div class="right" data-v-0647f784><div class="hint" data-v-0647f784><div class="title" data-v-0647f784> \u9898\u89E3\u4EC5\u4F9B\u5B66\u4E60\u53C2\u8003\u4F7F\u7528\uFF01 </div><div class="text" data-v-0647f784> \u6284\u88AD\u3001\u590D\u5236\u9898\u89E3\uFF0C\u4EE5\u8FBE\u5230\u5237 AC \u7387/AC \u6570\u91CF\u6216\u5176\u4ED6\u76EE\u7684\u7684\u884C\u4E3A\uFF0C\u5728\u672C\u5E73\u53F0\u662F\u4E25\u683C\u7981\u6B62\u7684\u3002 </div><div class="text" data-v-0647f784> \u5E73\u53F0\u975E\u5E38\u91CD\u89C6\u5B66\u672F\u8BDA\u4FE1\u3002\u6B64\u7C7B\u884C\u4E3A\u5C06\u4F1A\u5BFC\u81F4\u60A8\u7684\u8D26\u53F7\u88AB<strong data-v-0647f784>\u5C01\u7981</strong>\u3002 </div></div></div>',1),De=Vue.defineComponent({__name:"Solution",setup(C){const d=x(),_=P(),{proxy:r}=Vue.getCurrentInstance();var g=Vue.ref(!0),V=Vue.reactive({currentPage:1,Page:1,Limit:10,Count:0,changePage:u=>{V.currentPage=u,U(),e.getSolutions(e.PID)}}),I={toolbar:["bold","underline","italic","-","strikeThrough","title","sub","sup","quote","unorderedList","orderedList","-","codeRow","code","link","image","table","mermaid","katex","-","revoke","next","save","=","preview","htmlPreview","catalog"]},e=Vue.reactive({PID:"",data:[],myComment:"",title:"",mySolution:"",getSolutions:u=>{g.value=!0;let l=d.isLogin?d.UID:null;r.$get("api/solution/solutions",{PID:u,UID:l,Page:V.currentPage-1,Limit:V.Limit},0,2).then(n=>{var c,s;let o=n.data;if((o==null?void 0:o.code)==0){e.data=o.SolutionList,V.Count=o.count;for(let a of e.data)a.CanFold=!1,a.Fold=!1,a.Page=1,a.Limit=10,a.count=0,a.Comments=[],a.ShowComments=!1,a.ThumbsUp=a.FavoriteCount,a.IThumbsUp=a.isFavorite,a.CommentCount=0,a.CommentChangePage=m=>{a.Page=m,e.getComments(a)},e.getComments(a);g.value=e.data.length==0}r.codeProcessor((c=o==null?void 0:o.code)!=null?c:100001,(s=o==null?void 0:o.msg)!=null?s:"\u670D\u52A1\u5668\u9519\u8BEF\\\\error")})},fold:(u,l)=>{e.data[u].Fold=l},thumbUp:(u,l,n)=>{if(!d.isLogin||!d.UID){r.elMessage({message:"\u60A8\u8FD8\u672A\u767B\u5F55",type:"warning"});return}let o=d.UID;r.$post("api/favorite/",{SID:l,UID:o,ActionType:n},0,2).then(c=>{var a,m;let s=c.data;(s==null?void 0:s.code)==0&&(s.data,e.data[u].IThumbsUp=s.IsFavorite,e.data[u].ThumbsUp=s.Count,r.elNotification({message:s.IsFavorite==!0?"\u6210\u529F\u70B9\u8D5E":"\u53D6\u6D88\u70B9\u8D5E",type:"success"})),r.codeProcessor((a=s==null?void 0:s.code)!=null?a:100001,(m=s==null?void 0:s.msg)!=null?m:"\u670D\u52A1\u5668\u9519\u8BEF\\\\error")})},openComment:u=>{if(e.data[u].ShowComment){e.data[u].ShowComment=!1;return}e.myComment="",e.data[u].ShowComment=!0,e.getComments(e.data[u])},getComments:u=>{r.$get("api/comment/comments",{SID:u.SID,Page:u.Page-1,Limit:u.Limit},0,2).then(l=>{var o,c;let n=l.data;(n==null?void 0:n.code)==0&&(u.Count=n.Count,u.Comments=n.Data,u.CommentCount=n.Count),r.codeProcessor((o=n==null?void 0:n.code)!=null?o:100001,(c=n==null?void 0:n.msg)!=null?c:"\u670D\u52A1\u5668\u9519\u8BEF\\\\error")})},closeComment:u=>{e.data[u].ShowComment=!1},publishComment:u=>{if(!d.isLogin||!d.UID){r.elMessage({message:"\u60A8\u8FD8\u672A\u767B\u5F55",type:"warning"});return}if(!e.myComment){r.elMessage({message:"\u8BF7\u8F93\u5165\u5185\u5BB9",type:"warning"});return}let l=e.myComment;r.$post("/api/comment/",{SID:e.data[u].SID,ActionType:1,UID:d.UID,Text:l,FCID:-1},0,2).then(n=>{var c,s;let o=n.data;(o==null?void 0:o.code)==0&&(e.getComments(e.data[u]),e.myComment="",r.elNotification({message:"\u8BC4\u8BBA\u6210\u529F\uFF01",type:"success"})),r.codeProcessor((c=o==null?void 0:o.code)!=null?c:100001,(s=o==null?void 0:o.msg)!=null?s:"\u670D\u52A1\u5668\u9519\u8BEF\\\\error")})},deleteComment:(u,l,n,o)=>{r.$delete("forum/solution/comment/delete/"+l,{UID:o,SLTID:n},0,2).then(c=>{var a,m;let s=c.data;(s==null?void 0:s.code)==0&&(e.getComments(e.data[u]),r.elNotification({message:"\u5220\u9664\u6210\u529F",type:"success"})),r.codeProcessor((a=s==null?void 0:s.code)!=null?a:100001,(m=s==null?void 0:s.msg)!=null?m:"\u670D\u52A1\u5668\u9519\u8BEF\\\\error")})},publishSolution:()=>{if(!d.isLogin||!d.UID){r.elMessage({message:"\u60A8\u8FD8\u672A\u767B\u5F55",type:"warning"});return}if(!e.mySolution){r.elMessage({message:"\u8BF7\u8F93\u5165\u5185\u5BB9",type:"warning"});return}let u=d.UID;r.$post("api/solution/",{ActionType:1,PID:e.PID,UID:u,Title:e.title,Text:e.mySolution},0,2).then(l=>{var o,c;let n=l.data;n.code==0&&(e.mySolution="",window.scroll(0,0),r.elNotification({message:"\u53D1\u5E03\u6210\u529F\uFF01",type:"success"})),r.codeProcessor((o=n==null?void 0:n.code)!=null?o:100001,(c=n==null?void 0:n.msg)!=null?c:"\u670D\u52A1\u5668\u9519\u8BEF\\\\error")}),e.getSolutions(e.PID)}});function U(){r.$router.replace({path:"/Solution",query:{PID:e.PID,Page:V.currentPage,Limit:V.Limit}})}return Vue.onMounted(()=>{let u=r.$route.query.PID;e.PID=u,e.getSolutions(u)}),(u,l)=>{const n=Vue.resolveComponent("el-empty"),o=Vue.resolveComponent("ArrowDown"),c=Vue.resolveComponent("el-icon"),s=Vue.resolveComponent("StarFilled"),a=Vue.resolveComponent("Star"),m=Vue.resolveComponent("ChatLineSquare"),A=Vue.resolveComponent("ArrowUp"),f=Vue.resolveComponent("el-pagination"),v=Vue.resolveComponent("el-input"),D=Vue.resolveComponent("el-button"),T=Vue.resolveComponent("Hide"),h=Vue.resolveComponent("el-radio-button"),w=Vue.resolveComponent("el-radio-group");return Vue.openBlock(),Vue.createElementBlock("div",$,[Vue.createElementVNode("div",z,[Vue.withDirectives(Vue.createElementVNode("div",M,[Vue.createVNode(n,{description:"\u8BE5\u9898\u8FD8\u6728\u6709\u9898\u89E3\u3002"})],512),[[Vue.vShow,Vue.unref(g)]]),Vue.unref(e).data.length>0?(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:0},[Vue.createElementVNode("div",H,[Vue.createElementVNode("div",R,"\u5171\u53D1\u73B0\xA0"+Vue.toDisplayString(Vue.unref(V).Count)+"\xA0\u4E2A\u9898\u89E3",1)]),(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(e).data,(t,p)=>{var E,F,B,N,S,k;return Vue.openBlock(),Vue.createElementBlock("div",{class:Vue.normalizeClass(t.IThumbsUp==1?"item itemThumbsUp":"item")},[Vue.createElementVNode("div",q,[Vue.createElementVNode("div",j,[Vue.createElementVNode("img",{src:t.HeadURL?Vue.unref(y)+t.HeadURL:Vue.unref(r).Utils.DefaultHeadImage.show(t.UID)},null,8,G)]),Vue.createElementVNode("div",J,[Vue.createElementVNode("div",K,Vue.toDisplayString(t.UID),1),Vue.createElementVNode("div",O," \u6700\u540E\u66F4\u65B0\u65F6\u95F4\uFF1A"+Vue.toDisplayString(Vue.unref(r).Utils.TimeTools.timestampToTime(t.UpdateTime)),1),Vue.createElementVNode("div",Q," \u521B\u5EFA\u65F6\u95F4:"+Vue.toDisplayString(Vue.unref(r).Utils.TimeTools.timestampToTime(t.CreateTime)),1)])]),Vue.createElementVNode("div",{class:Vue.normalizeClass((E=t==null?void 0:t.Fold)==null||E?"contentFold":"content")},[Vue.createElementVNode("h3",null,Vue.toDisplayString(t.Title),1),Vue.createVNode(Vue.unref(MdEditorV3),{class:"mdEditor",modelValue:t.text,"onUpdate:modelValue":i=>t.text=i,theme:Vue.unref(_).theme>0?"light":"dark","preview-only":""},null,8,["modelValue","onUpdate:modelValue","theme"]),Vue.withDirectives(Vue.createElementVNode("div",W,[Vue.createElementVNode("div",{onClick:i=>Vue.unref(e).fold(p,!1)},[Vue.createTextVNode(" \u5C55\u5F00 \xA0 "),Vue.createVNode(c,{size:"26px"},{default:Vue.withCtx(()=>[Vue.createVNode(o)]),_:1})],8,X)],512),[[Vue.vShow,((F=t==null?void 0:t.Fold)!=null?F:!0)&&t.CanFold]])],2),Vue.createElementVNode("div",Y,[Vue.createElementVNode("div",Z,[Vue.createElementVNode("div",ee,[t.IThumbsUp==!0?(Vue.openBlock(),Vue.createBlock(c,{key:0,class:"iconThumbsUp cursor_pointer",size:"20px",onClick:i=>Vue.unref(e).thumbUp(p,t.SID,3)},{default:Vue.withCtx(()=>[Vue.createVNode(s)]),_:2},1032,["onClick"])):(Vue.openBlock(),Vue.createBlock(c,{key:1,class:"icon cursor_pointer",size:"20px",onClick:i=>Vue.unref(e).thumbUp(p,t.SID,1)},{default:Vue.withCtx(()=>[Vue.createVNode(a)]),_:2},1032,["onClick"])),Vue.createTextVNode(" \xA0"+Vue.toDisplayString(t.ThumbsUp)+"\xA0\u4E2A\u4EBA\u89C9\u5F97\u5F88\u8D5E ",1)]),Vue.createElementVNode("div",{class:"conmment cursor_pointer",onClick:i=>Vue.unref(e).openComment(p)},[Vue.createVNode(c,{class:"icon cursor_pointer",size:"20px"},{default:Vue.withCtx(()=>[Vue.createVNode(m)]),_:1}),Vue.createTextVNode(" \xA0"+Vue.toDisplayString(t.CommentCount)+"\xA0\u6761\u8BC4\u8BBA ",1)],8,te)]),!(t!=null&&t.Fold)&&t.CanFold?(Vue.openBlock(),Vue.createElementBlock("div",{key:0,class:"right cursor_pointer",onClick:i=>Vue.unref(e).fold(p,!0)},[Vue.createTextVNode(" \u6536\u8D77\xA0 "),Vue.createVNode(c,{size:"26px"},{default:Vue.withCtx(()=>[Vue.createVNode(A)]),_:1})],8,ue)):Vue.createCommentVNode("",!0)]),Vue.withDirectives(Vue.createElementVNode("div",oe,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList((B=t==null?void 0:t.Comments)!=null?B:[],(i,Ee)=>(Vue.openBlock(),Vue.createElementBlock("div",ne,[Vue.createElementVNode("div",se,[Vue.createElementVNode("img",{src:i.HeadURL?Vue.unref(y)+i.HeadURL:Vue.unref(r).Utils.DefaultHeadImage.show(i.UID),alt:""},null,8,re)]),Vue.createElementVNode("div",le,[Vue.createElementVNode("div",ae,Vue.toDisplayString(i.UID),1),Vue.createElementVNode("div",ce,Vue.toDisplayString(i.Text),1),Vue.createElementVNode("div",ie,[Vue.unref(d).isLogin&&Vue.unref(d).UID==i.UID?(Vue.openBlock(),Vue.createElementBlock("div",{key:0,class:"delete cursor_pointer",onClick:Fe=>Vue.unref(e).deleteComment(p,i.SLTCMTID,t.SLTID,Vue.unref(d).UID)}," \u5220\u9664 ",8,Ve)):Vue.createCommentVNode("",!0),Vue.createElementVNode("div",de,Vue.toDisplayString(Vue.unref(r).Utils.TimeTools.timestampToDate(i.UpdateTime,2)),1)])])]))),256)),((N=t.Count)!=null?N:0)==0?(Vue.openBlock(),Vue.createElementBlock("div",me,[Vue.createVNode(n,{description:"\u5F53\u524D\u8FD8\u6CA1\u6709\u8BC4\u8BBA\u54E6~"})])):Vue.createCommentVNode("",!0),((S=t.Count)!=null?S:0)>=10?(Vue.openBlock(),Vue.createElementBlock("div",pe,[Vue.createVNode(f,{background:"",layout:"prev, pager, next","page-size":t.Limit,total:t.Count,"current-page":t.Page,onCurrentChange:t.CommentChangePage},null,8,["page-size","total","current-page","onCurrentChange"])])):Vue.createCommentVNode("",!0),Vue.createElementVNode("div",Ce,[Vue.createVNode(v,{modelValue:Vue.unref(e).myComment,"onUpdate:modelValue":l[0]||(l[0]=i=>Vue.unref(e).myComment=i),autosize:"",type:"textarea",placeholder:"\u7559\u4E0B\u4F60\u53CB\u597D\u7684\u8BC4\u8BBA\u5427\uFF01"},null,8,["modelValue"]),Vue.createVNode(D,{type:"primary",plain:Vue.unref(_).theme>0,onClick:i=>Vue.unref(e).publishComment(p)},{default:Vue.withCtx(()=>[Vue.createTextVNode(" \u53D1\u8868 ")]),_:2},1032,["plain","onClick"])]),Vue.createElementVNode("div",{class:"hideComment cursor_pointer",onClick:i=>Vue.unref(e).closeComment(p)},[Vue.createTextVNode(" \u9690\u85CF\u8BC4\u8BBA\xA0 "),Vue.createVNode(c,{size:"24px"},{default:Vue.withCtx(()=>[Vue.createVNode(T)]),_:1})],8,_e)],512),[[Vue.vShow,(k=t==null?void 0:t.ShowComment)!=null?k:!1]])],2)}),256)),Vue.unref(V).Count>5?(Vue.openBlock(),Vue.createElementBlock("div",ge,[Vue.createVNode(f,{background:"",layout:"prev, pager, next","page-size":Vue.unref(V).Limit,total:Vue.unref(V).Count,"current-page":Vue.unref(V).currentPage,onCurrentChange:Vue.unref(V).changePage},null,8,["page-size","total","current-page","onCurrentChange"]),Vue.createVNode(w,{modelValue:Vue.unref(V).Limit,"onUpdate:modelValue":l[1]||(l[1]=t=>Vue.unref(V).Limit=t),onChange:l[2]||(l[2]=t=>Vue.unref(V).changePage(1)),style:{margin:"0 20px"}},{default:Vue.withCtx(()=>[Vue.createVNode(h,{label:5}),Vue.createVNode(h,{label:10}),Vue.createVNode(h,{label:15})]),_:1},8,["modelValue"])])):Vue.createCommentVNode("",!0)],64)):Vue.createCommentVNode("",!0),Vue.createElementVNode("div",he,[fe,Vue.createVNode(v,{modelValue:Vue.unref(e).title,"onUpdate:modelValue":l[3]||(l[3]=t=>Vue.unref(e).title=t),placeholder:"Please input",clearable:""},null,8,["modelValue"]),Vue.createVNode(Vue.unref(MdEditorV3),{class:"mdEditor",modelValue:Vue.unref(e).mySolution,"onUpdate:modelValue":l[4]||(l[4]=t=>Vue.unref(e).mySolution=t),toolbars:Vue.unref(I).toolbar,theme:Vue.unref(_).theme>0?"light":"dark"},null,8,["modelValue","toolbars","theme"]),Vue.createVNode(D,{type:"primary",plain:Vue.unref(_).theme>0,onClick:Vue.unref(e).publishSolution},{default:Vue.withCtx(()=>[Vue.createTextVNode(" \u53D1\u5E03\u9898\u89E3 ")]),_:1},8,["plain","onClick"])])]),ve])}}});const Ne=b(De,[["__scopeId","data-v-0647f784"]]);export{Ne as default};
