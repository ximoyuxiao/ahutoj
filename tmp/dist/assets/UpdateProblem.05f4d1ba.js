import{c as O,I as S,e as k,s as A,_ as M}from"./index.7fe3d568.js";const d=f=>(Vue.pushScopeId("data-v-64036725"),f=f(),Vue.popScopeId(),f),U=d(()=>Vue.createElementVNode("span",null,"\u9898\u53F7",-1)),R={class:"showList"},$={class:"list"},z=["onClick"],H={class:"pagination"},G=d(()=>Vue.createElementVNode("span",null,"\u6807\u9898",-1)),K=d(()=>Vue.createElementVNode("span",null,"\u65F6\u95F4\u9650\u5236/ms",-1)),q=d(()=>Vue.createElementVNode("span",{style:{"margin-left":"50px"}},"\u5185\u5B58\u9650\u5236/MiB",-1)),Y=d(()=>Vue.createElementVNode("span",null,"\u6807\u7B7E",-1)),W=d(()=>Vue.createElementVNode("span",null,"\u6765\u6E90",-1)),j=d(()=>Vue.createElementVNode("span",null,"\u53EF\u89C1",-1)),J=d(()=>Vue.createElementVNode("span",null,"\u6587\u672C\u7C7B\u578B",-1)),Q={key:0},X={class:"markdown Top"},Z={key:1},ee={class:"normal"},ue=d(()=>Vue.createElementVNode("span",null,"\u9898\u76EE\u63CF\u8FF0",-1)),te=d(()=>Vue.createElementVNode("span",null,"\u8F93\u5165\u63CF\u8FF0",-1)),le=d(()=>Vue.createElementVNode("span",null,"\u8F93\u51FA\u63CF\u8FF0",-1)),oe=d(()=>Vue.createElementVNode("span",null,"\u8F93\u5165\u6837\u4F8B",-1)),ne=d(()=>Vue.createElementVNode("span",null,"\u8F93\u51FA\u6837\u4F8B",-1)),ae=d(()=>Vue.createElementVNode("span",null,"\u63D0\u793A",-1)),re={key:2,style:{display:"flex"},class:"Top"},ie=d(()=>Vue.createElementVNode("span",{class:"Bold"},"\u5220 \u9664",-1)),se=d(()=>Vue.createElementVNode("span",{class:"Bold"},"\u4FEE \u6539",-1)),Ve=Vue.defineComponent({__name:"UpdateProblem",setup(f){const{proxy:i}=Vue.getCurrentInstance(),c=O(),g=Vue.ref(!1);var N={toolbar:["bold","underline","italic","-","strikeThrough","title","sub","sup","quote","unorderedList","orderedList","-","codeRow","code","link","image","table","mermaid","katex","-","revoke","next","save","=","preview","htmlPreview","catalog"]},V=Vue.reactive({PID:"",isSearched:!1,onFocus(){V.isSearched=!1},getProblem(l){l&&(V.PID=l),i.$axios.get("api/problem/"+V.PID).then(e=>{var o,r;let n=e.data;n.code==0?(u.copy(n),V.isSearched=!0):V.isSearched=!1,i.codeProcessor((o=n==null?void 0:n.code)!=null?o:100001,(r=n==null?void 0:n.msg)!=null?r:"\u670D\u52A1\u5668\u9519\u8BEF\\\\error")})}}),u=Vue.reactive({PID:"",Title:"",Description:"",Input:"",Output:"",SampleInput:"",SampleOutput:"",LimitTime:0,LimitMemory:0,Hit:"",Label:"",Origin:-1,OriginPID:"",ContentType:-1,Visible:1,ContentTypes:[{label:"\u666E\u901A ",value:c.PROBLEM_CONTENTTYPE_NORMAL},{label:"MarkDown",value:c.PROBLEM_CONTENTTYPE_MARKDOWN}],Origins:[{label:"\u672C\u5730",value:c.PROBLEM_ORIGIN_LOCAL},{label:"CodeForce",value:c.PROBLEM_ORIGIN_CF},{label:"AtCoder",value:c.PROBLEM_ORIGIN_ATCODER},{label:"\u6D1B\u8C37",value:c.PROBLEM_ORIGIN_LUOGU}],OriginPlaceHolder:{[c.PROBLEM_ORIGIN_CF]:"\u7ADE\u8D5BID + \u9898\u76EE\u7F16\u53F7 \u5982\uFF1A1069A",[c.PROBLEM_ORIGIN_ATCODER]:"\u7ADE\u8D5BID + \u9898\u76EE\u7F16\u53F7 \u5982\uFF1Aabc277_e"},Visibles:[{label:"\u53EF\u89C1",value:c.PROBLEM_VISIBLE},{label:"\u4E0D\u53EF\u89C1",value:c.PROBLEM_UNVISIBLE}],init(){V.isSearched=!1,this.PID=0,this.Title="",this.Description="",this.Input="",this.Output="",this.SampleInput="",this.SampleOutput="",this.LimitTime=0,this.LimitMemory=0,this.Hit="",this.Label="",this.Origin=0,this.OriginPID="",this.ContentType=-1,this.Visible=1},copy(l){u.PID=l.PID,u.Description=l.Description,u.Hit=l.Hit,u.Input=l.Input,u.LimitMemory=l.LimitMemory,u.LimitTime=l.LimitTime,u.Output=l.Output,u.SampleInput=l.SampleInput,u.SampleOutput=l.SampleOutput,u.Title=l.Title,u.Label=l.Label,u.Origin=l.Origin,u.OriginPID=l.OriginPID,u.ContentType=l.ContentType,u.Visible=l.Visible},updateImg:l=>{if(l.length==0){i.elMessage({message:"\u4E0A\u4F20\u5185\u5BB9\u4E3A\u7A7A\uFF01",type:"warning"});return}ElementPlus.ElMessageBox.confirm("\u786E\u5B9A\u4E0A\u4F20\u5417\uFF1F","\u6CE8\u610F",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{l.forEach(e=>{D(e)})})}}),p=Vue.reactive({Count:0,currentPage:1,limit:20,init(){p.Count=0,p.currentPage=1,p.limit=20}}),a=Vue.reactive({Data:[],isShowed:!1,init(){this.Data=[]},showList:()=>{a.isShowed?a.isShowed=!1:(a.isShowed=!0,a.search())},search:()=>{i.$get("api/problem/list?Page="+(p.currentPage-1)+"&Limit="+p.limit).then(l=>{var n,o;let e=l.data;e.code==0&&(p.Count=e.Count,a.Data=e.Data,a.Data.forEach(r=>{r.selected=!1}),a.isShowed=!0),i.codeProcessor((n=e==null?void 0:e.code)!=null?n:100001,(o=e==null?void 0:e.msg)!=null?o:"\u670D\u52A1\u5668\u9519\u8BEF\\\\error")})},changePage:l=>{p.currentPage=l,a.search()},selectProblem:l=>{a.Data[l].selected=!a.Data[l].selected},selectAll:()=>{a.Data.forEach(l=>{l.selected=!0})},batchDelete:()=>{let l=[],e="";if(a.Data.forEach(n=>{n.selected&&(l.push(n.PID),e+=n.PID+" ")}),l.length<=0){i.elMessage({message:"\u672A\u9009\u62E9\u4EFB\u4F55\u9898\u76EE\uFF01",type:"warning"});return}ElementPlus.ElMessageBox.confirm("\u786E\u5B9A\u8981\u6279\u91CF\u5220\u9664\u9898\u53F7 "+e+" \u9898\u76EE\u5417\uFF1F","\u6CE8\u610F",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{i.$axios.post("api/problem/delete/",{Pids:l}).then(n=>{var r,s;let o=n.data;o.code==0&&(u.init(),i.elMessage({message:"\u6279\u91CF\u5220\u9664\u6210\u529F!",type:"success"})),i.codeProcessor((r=o==null?void 0:o.code)!=null?r:100001,(s=o==null?void 0:o.msg)!=null?s:"\u670D\u52A1\u5668\u9519\u8BEF\\\\error")}),a.isShowed=!1})}});function D(l){S.problemImageCompress(l).then(e=>{e.code==0&&k.uploadProblemImage(e.data).then(n=>{var r,s;let o=n.data;if(o.code==0){let _=o.ImageURL;u.Description+=`
![](${A}${_})`,i.elMessage({message:`
              <strong>${l.name}\u4E0A\u4F20\u6210\u529F</strong><br/>
              <span>\u5DF2\u538B\u7F29:${(l.size/1024).toFixed(2)}KB->${(e.data.size/1024).toFixed(2)}KB</span>
            `,type:"success",duration:5e3,dangerouslyUseHTMLString:!0})}i.codeProcessor((r=o==null?void 0:o.code)!=null?r:100001,(s=o==null?void 0:o.msg)!=null?s:"\u670D\u52A1\u5668\u9519\u8BEF\\\\error")})})}function b(){ElementPlus.ElMessageBox.confirm("\u786E\u5B9A\u8981\u5220\u9664\u9898\u53F7\u4E3A "+V.PID+" \u7684\u9898\u76EE\u5417\uFF1F","\u6CE8\u610F",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{i.$axios.post("api/problem/delete/",{Pids:[V.PID]}).then(l=>{var n,o;let e=l.data;e.code==0?(u.init(),i.elMessage({message:"\u5220\u9664\u6210\u529F!",type:"success"})):i.codeProcessor((n=e==null?void 0:e.code)!=null?n:100001,(o=e==null?void 0:e.msg)!=null?o:"\u670D\u52A1\u5668\u9519\u8BEF\\\\error")})})}function B(){i.$post("api/problem/edit/",{Pid:u.PID,Title:u.Title,Description:u.Description,Input:u.Input,Output:u.Output,SampleInput:u.SampleInput,SampleOutput:u.SampleOutput,LimitTime:u.LimitTime,LimitMemory:u.LimitMemory,Hit:u.Hit,Label:u.Label,Origin:u.Origin,OriginPID:u.OriginPID,ContentType:u.ContentType,Visible:u.Visible}).then(l=>{var n,o;let e=l.data;e.code==0?(i.$log(e),i.elMessage({message:"\u4FEE\u6539\u6210\u529F!",type:"success"})):i.codeProcessor((n=e==null?void 0:e.code)!=null?n:100001,(o=e==null?void 0:e.msg)!=null?o:"\u670D\u52A1\u5668\u9519\u8BEF\\\\error")})}return Vue.onMounted(()=>{var l=i.$route.query.PID;l&&(V.PID=l,V.getProblem(l))}),(l,e)=>{const n=Vue.resolveComponent("el-drawer"),o=Vue.resolveComponent("el-button"),r=Vue.resolveComponent("el-input"),s=Vue.resolveComponent("el-row"),_=Vue.resolveComponent("el-header"),w=Vue.resolveComponent("el-button-group"),I=Vue.resolveComponent("el-checkbox"),P=Vue.resolveComponent("el-pagination"),h=Vue.resolveComponent("el-main"),C=Vue.resolveComponent("el-container"),L=Vue.resolveComponent("el-aside"),v=Vue.resolveComponent("el-input-number"),E=Vue.resolveComponent("el-option"),F=Vue.resolveComponent("el-select"),y=Vue.resolveComponent("FullScreen"),T=Vue.resolveComponent("el-icon");return Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,[Vue.createVNode(n,{modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=t=>g.value=t),title:Vue.unref(u).Title,fullsreen:"true",size:"100%",direction:"btt"},{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(MdEditorV3),{modelValue:Vue.unref(u).Description,"onUpdate:modelValue":e[0]||(e[0]=t=>Vue.unref(u).Description=t),toolbars:Vue.unref(N).toolbar,"on-upload-img":Vue.unref(u).updateImg,style:{height:"calc(100vh - 120px)"}},null,8,["modelValue","toolbars","on-upload-img"])]),_:1},8,["modelValue","title"]),Vue.createVNode(C,{direction:"horizontal"},{default:Vue.withCtx(()=>[Vue.createVNode(L,{style:{width:"287px",height:"100%"}},{default:Vue.withCtx(()=>[Vue.createVNode(C,null,{default:Vue.withCtx(()=>[Vue.createVNode(_,{class:"Container"},{default:Vue.withCtx(()=>[Vue.createVNode(s,null,{default:Vue.withCtx(()=>[U,Vue.createVNode(r,{modelValue:Vue.unref(V).PID,"onUpdate:modelValue":e[3]||(e[3]=t=>Vue.unref(V).PID=t),placeholder:"P1000",style:{width:"203px"},class:"Left"},{append:Vue.withCtx(()=>[Vue.createVNode(o,{icon:Vue.unref(ElementPlusIconsVue.Search),onClick:e[2]||(e[2]=t=>Vue.unref(V).getProblem(null))},null,8,["icon"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),Vue.createVNode(h,{class:"Container"},{default:Vue.withCtx(()=>[Vue.createElementVNode("div",R,[Vue.createVNode(w,{class:"ml-4"},{default:Vue.withCtx(()=>[Vue.createVNode(o,{type:"plain",onClick:e[4]||(e[4]=t=>Vue.unref(a).showList())},{default:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(Vue.unref(a).isShowed?"\u5173\u95ED\u5217\u8868":"\u663E\u793A\u5217\u8868"),1)]),_:1}),Vue.withDirectives(Vue.createVNode(o,{plain:"",onClick:e[5]||(e[5]=t=>Vue.unref(a).showList())},{default:Vue.withCtx(()=>[Vue.createTextVNode(" \u5F53\u9875\u5168\u9009 ")]),_:1},512),[[Vue.vShow,Vue.unref(a).isShowed]]),Vue.withDirectives(Vue.createVNode(o,{bg:"",plain:"",type:"danger",onClick:e[6]||(e[6]=t=>Vue.unref(a).batchDelete()),icon:Vue.unref(ElementPlusIconsVue.Delete)},{default:Vue.withCtx(()=>[Vue.createTextVNode(" \u5220\u9664 ")]),_:1},8,["icon"]),[[Vue.vShow,Vue.unref(a).isShowed]])]),_:1})]),Vue.withDirectives(Vue.createElementVNode("div",$,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(a).Data,(t,m)=>(Vue.openBlock(),Vue.createElementBlock("div",{class:Vue.normalizeClass(t.selected?"item itemSelected":"item"),key:m},[Vue.createVNode(I,{modelValue:t.selected,"onUpdate:modelValue":x=>t.selected=x,onChange:Vue.withModifiers(x=>Vue.unref(a).selectProblem(m),["stop"]),size:"large",style:{padding:"0",margin:"0 8px 0 8px",height:"100%"}},null,8,["modelValue","onUpdate:modelValue","onChange"]),Vue.createElementVNode("div",{class:"title cursor_pointer",onClick:Vue.withModifiers(x=>Vue.unref(V).getProblem(t.PID),["stop"])},Vue.toDisplayString(t.PID)+"\xA0-\xA0"+Vue.toDisplayString(t.Title),9,z)],2))),128))],512),[[Vue.vShow,Vue.unref(a).isShowed]]),Vue.withDirectives(Vue.createElementVNode("div",H,[Vue.createVNode(P,{background:"",layout:"prev, pager, next","page-size":Vue.unref(p).limit,total:Vue.unref(p).Count,"current-page":Vue.unref(p).currentPage,onCurrentChange:Vue.unref(a).changePage},null,8,["page-size","total","current-page","onCurrentChange"])],512),[[Vue.vShow,Vue.unref(a).isShowed]])]),_:1})]),_:1})]),_:1}),Vue.createVNode(C,{direction:"vertical",class:"Left"},{default:Vue.withCtx(()=>[Vue.unref(V).isSearched?(Vue.openBlock(),Vue.createBlock(h,{key:0,class:"Container"},{default:Vue.withCtx(()=>[Vue.createVNode(s,null,{default:Vue.withCtx(()=>[G,Vue.createVNode(r,{modelValue:Vue.unref(u).Title,"onUpdate:modelValue":e[7]||(e[7]=t=>Vue.unref(u).Title=t),class:"problemTitle Left"},null,8,["modelValue"])]),_:1}),Vue.createVNode(s,{class:"Top"},{default:Vue.withCtx(()=>[K,Vue.createVNode(v,{modelValue:Vue.unref(u).LimitTime,"onUpdate:modelValue":e[8]||(e[8]=t=>Vue.unref(u).LimitTime=t),min:200,max:1e4,step:200,"controls-position":"right",class:"Left"},null,8,["modelValue"]),q,Vue.createVNode(v,{modelValue:Vue.unref(u).LimitMemory,"onUpdate:modelValue":e[9]||(e[9]=t=>Vue.unref(u).LimitMemory=t),min:64,max:1024,step:64,"controls-position":"right",class:"Left"},null,8,["modelValue"])]),_:1}),Vue.createVNode(s,{class:"Top"},{default:Vue.withCtx(()=>[Y,Vue.createVNode(r,{modelValue:Vue.unref(u).Label,"onUpdate:modelValue":e[10]||(e[10]=t=>Vue.unref(u).Label=t),placeholder:"\u6BCF\u4E2A\u6807\u7B7E\u7528\u82F1\u6587\u7684 ; \u9694\u5F00",class:"tagList Left"},null,8,["modelValue"])]),_:1}),Vue.createVNode(s,{class:"Top"},{default:Vue.withCtx(()=>[W,Vue.createVNode(F,{modelValue:Vue.unref(u).Origin,"onUpdate:modelValue":e[11]||(e[11]=t=>Vue.unref(u).Origin=t),class:"m-2 Left",placeholder:"Select"},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(u).Origins,(t,m)=>(Vue.openBlock(),Vue.createBlock(E,{key:t.label,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),Vue.withDirectives(Vue.createVNode(r,{modelValue:Vue.unref(u).OriginPID,"onUpdate:modelValue":e[12]||(e[12]=t=>Vue.unref(u).OriginPID=t),placeholder:Vue.unref(u).OriginPlaceHolder[Vue.unref(u).Origin],class:"originInfo"},null,8,["modelValue","placeholder"]),[[Vue.vShow,Vue.unref(u).Origin!=-1]])]),_:1}),Vue.createVNode(s,{class:"Top"},{default:Vue.withCtx(()=>[j,Vue.createVNode(F,{modelValue:Vue.unref(u).Visible,"onUpdate:modelValue":e[13]||(e[13]=t=>Vue.unref(u).Visible=t),class:"m-2 Left",placeholder:"Select"},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(u).Visibles,(t,m)=>(Vue.openBlock(),Vue.createBlock(E,{key:t.label,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})):Vue.createCommentVNode("",!0),Vue.unref(V).isSearched?(Vue.openBlock(),Vue.createBlock(h,{key:1,class:"Container"},{default:Vue.withCtx(()=>[Vue.createVNode(s,null,{default:Vue.withCtx(()=>[J,Vue.createVNode(F,{modelValue:Vue.unref(u).ContentType,"onUpdate:modelValue":e[14]||(e[14]=t=>Vue.unref(u).ContentType=t),class:"m-2 Left",placeholder:"Select"},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(u).ContentTypes,(t,m)=>(Vue.openBlock(),Vue.createBlock(E,{key:t.label,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),Vue.unref(u).ContentType==1?(Vue.openBlock(),Vue.createBlock(o,{key:0,class:"Left",type:"primary",onClick:e[15]||(e[15]=t=>g.value=!0)},{default:Vue.withCtx(()=>[Vue.createVNode(T,{size:"19px"},{default:Vue.withCtx(()=>[Vue.createVNode(y)]),_:1}),Vue.createTextVNode(" \xA0\u5168\u5C4F\u7F16\u8F91 ")]),_:1})):Vue.createCommentVNode("",!0)]),_:1}),Vue.unref(u).ContentType==1?(Vue.openBlock(),Vue.createElementBlock("div",Q,[Vue.createElementVNode("div",X,[Vue.createVNode(Vue.unref(MdEditorV3),{modelValue:Vue.unref(u).Description,"onUpdate:modelValue":e[16]||(e[16]=t=>Vue.unref(u).Description=t),toolbars:Vue.unref(N).toolbar,"on-upload-img":Vue.unref(u).updateImg,"preview-only":"",style:{"max-height":"600px"}},null,8,["modelValue","toolbars","on-upload-img"])])])):(Vue.openBlock(),Vue.createElementBlock("div",Z,[Vue.createElementVNode("div",ee,[Vue.createVNode(s,{class:"Top"},{default:Vue.withCtx(()=>[ue,Vue.createVNode(r,{modelValue:Vue.unref(u).Description,"onUpdate:modelValue":e[17]||(e[17]=t=>Vue.unref(u).Description=t),type:"textarea",autosize:"",class:"plainText Left"},null,8,["modelValue"])]),_:1}),Vue.createVNode(s,{class:"Top"},{default:Vue.withCtx(()=>[te,Vue.createVNode(r,{modelValue:Vue.unref(u).Input,"onUpdate:modelValue":e[18]||(e[18]=t=>Vue.unref(u).Input=t),type:"textarea",autosize:"",class:"plainText Left"},null,8,["modelValue"])]),_:1}),Vue.createVNode(s,{class:"Top"},{default:Vue.withCtx(()=>[le,Vue.createVNode(r,{modelValue:Vue.unref(u).Output,"onUpdate:modelValue":e[19]||(e[19]=t=>Vue.unref(u).Output=t),type:"textarea",autosize:"",class:"plainText Left"},null,8,["modelValue"])]),_:1}),Vue.createVNode(s,{class:"Top"},{default:Vue.withCtx(()=>[oe,Vue.createVNode(r,{modelValue:Vue.unref(u).SampleInput,"onUpdate:modelValue":e[20]||(e[20]=t=>Vue.unref(u).SampleInput=t),type:"textarea",autosize:"",class:"plainText Left"},null,8,["modelValue"])]),_:1}),Vue.createVNode(s,{class:"Top"},{default:Vue.withCtx(()=>[ne,Vue.createVNode(r,{modelValue:Vue.unref(u).SampleOutput,"onUpdate:modelValue":e[21]||(e[21]=t=>Vue.unref(u).SampleOutput=t),type:"textarea",autosize:"",class:"plainText Left"},null,8,["modelValue"])]),_:1}),Vue.createVNode(s,{class:"Top"},{default:Vue.withCtx(()=>[ae,Vue.createVNode(r,{modelValue:Vue.unref(u).Hit,"onUpdate:modelValue":e[22]||(e[22]=t=>Vue.unref(u).Hit=t),type:"textarea",autosize:"",class:"plainText",style:{"margin-left":"50px"}},null,8,["modelValue"])]),_:1})])]))]),_:1})):Vue.createCommentVNode("",!0),Vue.unref(V).isSearched?(Vue.openBlock(),Vue.createElementBlock("div",re,[Vue.createVNode(o,{type:"danger",onClick:e[23]||(e[23]=t=>b()),class:"button-1"},{default:Vue.withCtx(()=>[ie]),_:1}),Vue.createVNode(o,{onClick:e[24]||(e[24]=t=>B()),type:"warning",class:"button-2"},{default:Vue.withCtx(()=>[se]),_:1})])):Vue.createCommentVNode("",!0)]),_:1})]),_:1})],64)}}});const ce=M(Ve,[["__scopeId","data-v-64036725"]]);export{ce as default};
