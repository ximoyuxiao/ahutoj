import{c as v,I as b,e as I,s as P,_ as x}from"./index.de99a551.js";const a=E=>(Vue.pushScopeId("data-v-11358166"),E=E(),Vue.popScopeId(),E),O={class:"updateProblem"},y=a(()=>Vue.createElementVNode("br",null,null,-1)),L=a(()=>Vue.createElementVNode("span",null,"\u9898\u53F7",-1)),w={key:0,class:"table"},T=a(()=>Vue.createElementVNode("span",null,"\u6807\u9898",-1)),S=a(()=>Vue.createElementVNode("span",null,"\u65F6\u95F4\u9650\u5236",-1)),k=a(()=>Vue.createElementVNode("span",null,"\xA0\u6BEB\u79D2",-1)),A=a(()=>Vue.createElementVNode("span",null,"\u5185\u5B58\u9650\u5236",-1)),M=a(()=>Vue.createElementVNode("span",null,"\xA0MiB",-1)),U=a(()=>Vue.createElementVNode("span",null,"\u6765\u6E90",-1)),R=a(()=>Vue.createElementVNode("span",null,"\u53EF\u89C1",-1)),$=a(()=>Vue.createElementVNode("span",null,"\u6807\u7B7E",-1)),z=a(()=>Vue.createElementVNode("br",null,null,-1)),H=a(()=>Vue.createElementVNode("span",null,"\u6587\u672C\u7C7B\u578B",-1)),G={class:"markdown"},K=a(()=>Vue.createElementVNode("span",null,"\u6807\u7B7E\uFF1A",-1)),q={key:1,class:"normal"},Y=a(()=>Vue.createElementVNode("span",null,"\u9898\u76EE\u63CF\u8FF0",-1)),j=a(()=>Vue.createElementVNode("span",null,"\u8F93\u5165\u63CF\u8FF0",-1)),W=a(()=>Vue.createElementVNode("span",null,"\u8F93\u51FA\u63CF\u8FF0",-1)),J=a(()=>Vue.createElementVNode("span",null,"\u8F93\u5165\u6837\u4F8B",-1)),Q=a(()=>Vue.createElementVNode("span",null,"\u8F93\u51FA\u6837\u4F8B",-1)),X=a(()=>Vue.createElementVNode("span",null,"\u63D0\u793A",-1)),Z={style:{display:"flex","justify-content":"flex-end",padding:"10px 0"}},ee={class:"showList"},ue={class:"list"},te=["checked","onChange"],le=["onClick"],oe={class:"pagination"},ne=Vue.defineComponent({__name:"UpdateProblem",setup(E){const{proxy:r}=Vue.getCurrentInstance(),d=v();var h={toolbar:["bold","underline","italic","-","strikeThrough","title","sub","sup","quote","unorderedList","orderedList","-","codeRow","code","link","image","table","mermaid","katex","-","revoke","next","save","=","preview","htmlPreview","catalog"]},V=Vue.reactive({PID:"",isSearched:!1,onFocus(){V.isSearched=!1},getProblem(l){l&&(V.PID=l),r.$axios.get("api/problem/"+V.PID).then(e=>{var n,s;let o=e.data;o.code==0?(u.copy(o),V.isSearched=!0):V.isSearched=!1,r.codeProcessor((n=o==null?void 0:o.code)!=null?n:100001,(s=o==null?void 0:o.msg)!=null?s:"\u670D\u52A1\u5668\u9519\u8BEF\\\\error")})}}),u=Vue.reactive({PID:"",Title:"",Description:"",Input:"",Output:"",SampleInput:"",SampleOutput:"",LimitTime:0,LimitMemory:0,Hit:"",Label:"",Origin:-1,OriginPID:"",ContentType:-1,Visible:1,ContentTypes:[{label:"\u666E\u901A ",value:d.PROBLEM_CONTENTTYPE_NORMAL},{label:"MarkDown",value:d.PROBLEM_CONTENTTYPE_MARKDOWN}],Origins:[{label:"\u672C\u5730",value:d.PROBLEM_ORIGIN_LOCAL},{label:"CodeForce",value:d.PROBLEM_ORIGIN_CF},{label:"AtCoder",value:d.PROBLEM_ORIGIN_ATCODER},{label:"\u6D1B\u8C37",value:d.PROBLEM_ORIGIN_LUOGU}],OriginPlaceHolder:{[d.PROBLEM_ORIGIN_CF]:"\u7ADE\u8D5BID + \u9898\u76EE\u7F16\u53F7 \u5982\uFF1A1069A",[d.PROBLEM_ORIGIN_ATCODER]:"\u7ADE\u8D5BID + \u9898\u76EE\u7F16\u53F7 \u5982\uFF1Aabc277_e"},Visibles:[{label:"\u53EF\u89C1",value:d.PROBLEM_VISIBLE},{label:"\u4E0D\u53EF\u89C1",value:d.PROBLEM_UNVISIBLE}],init(){V.isSearched=!1,this.PID=0,this.Title="",this.Description="",this.Input="",this.Output="",this.SampleInput="",this.SampleOutput="",this.LimitTime=0,this.LimitMemory=0,this.Hit="",this.Label="",this.Origin=0,this.OriginPID="",this.ContentType=-1,this.Visible=1},copy(l){u.PID=l.PID,u.Description=l.Description,u.Hit=l.Hit,u.Input=l.Input,u.LimitMemory=l.LimitMemory,u.LimitTime=l.LimitTime,u.Output=l.Output,u.SampleInput=l.SampleInput,u.SampleOutput=l.SampleOutput,u.Title=l.Title,u.Label=l.Label,u.Origin=l.Origin,u.OriginPID=l.OriginPID,u.ContentType=l.ContentType,u.Visible=l.Visible},updateImg:l=>{if(l.length==0){r.elMessage({message:"\u4E0A\u4F20\u5185\u5BB9\u4E3A\u7A7A\uFF01",type:"warning"});return}ElementPlus.ElMessageBox.confirm("\u786E\u5B9A\u4E0A\u4F20\u5417\uFF1F","\u6CE8\u610F",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{l.forEach(e=>{_(e)})})}}),c=Vue.reactive({Count:0,currentPage:1,limit:20,init(){c.Count=0,c.currentPage=1,c.limit=20}}),i=Vue.reactive({Data:[],isShowed:!1,init(){this.Data=[]},showList:()=>{i.isShowed?i.isShowed=!1:(i.isShowed=!0,i.search())},search:()=>{r.$get("api/problem/list?Page="+(c.currentPage-1)+"&Limit="+c.limit).then(l=>{var o,n;let e=l.data;e.code==0&&(c.Count=e.Count,i.Data=e.Data,i.Data.forEach(s=>{s.selected=!1}),i.isShowed=!0),r.codeProcessor((o=e==null?void 0:e.code)!=null?o:100001,(n=e==null?void 0:e.msg)!=null?n:"\u670D\u52A1\u5668\u9519\u8BEF\\\\error")})},changePage:l=>{c.currentPage=l,i.search()},selectProblem:l=>{i.Data[l].selected=!i.Data[l].selected},selectAll:()=>{i.Data.forEach(l=>{l.selected=!0})},batchDelete:()=>{let l=[],e="";if(i.Data.forEach(o=>{o.selected&&(l.push(o.PID),e+=o.PID+" ")}),l.length<=0){r.elMessage({message:"\u672A\u9009\u62E9\u4EFB\u4F55\u9898\u76EE\uFF01",type:"warning"});return}ElementPlus.ElMessageBox.confirm("\u786E\u5B9A\u8981\u6279\u91CF\u5220\u9664\u9898\u53F7 "+e+" \u9898\u76EE\u5417\uFF1F","\u6CE8\u610F",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{r.$axios.post("api/problem/delete/",{Pids:l}).then(o=>{var s,p;let n=o.data;n.code==0&&(u.init(),r.elMessage({message:"\u6279\u91CF\u5220\u9664\u6210\u529F!",type:"success"})),r.codeProcessor((s=n==null?void 0:n.code)!=null?s:100001,(p=n==null?void 0:n.msg)!=null?p:"\u670D\u52A1\u5668\u9519\u8BEF\\\\error")}),i.isShowed=!1})}});function _(l){b.problemImageCompress(l).then(e=>{e.code==0&&I.uploadProblemImage(e.data).then(o=>{var s,p;let n=o.data;if(n.code==0){let f=n.ImageURL;u.Description+=`
![](${P}${f})`,r.elMessage({message:`
              <strong>${l.name}\u4E0A\u4F20\u6210\u529F</strong><br/>
              <span>\u5DF2\u538B\u7F29:${(l.size/1024).toFixed(2)}KB->${(e.data.size/1024).toFixed(2)}KB</span>
            `,type:"success",duration:5e3,dangerouslyUseHTMLString:!0})}r.codeProcessor((s=n==null?void 0:n.code)!=null?s:100001,(p=n==null?void 0:n.msg)!=null?p:"\u670D\u52A1\u5668\u9519\u8BEF\\\\error")})})}function C(){ElementPlus.ElMessageBox.confirm("\u786E\u5B9A\u8981\u5220\u9664\u9898\u53F7\u4E3A "+V.PID+" \u7684\u9898\u76EE\u5417\uFF1F","\u6CE8\u610F",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{r.$axios.post("api/problem/delete/",{Pids:[V.PID]}).then(l=>{var o,n;let e=l.data;e.code==0?(u.init(),r.elMessage({message:"\u5220\u9664\u6210\u529F!",type:"success"})):r.codeProcessor((o=e==null?void 0:e.code)!=null?o:100001,(n=e==null?void 0:e.msg)!=null?n:"\u670D\u52A1\u5668\u9519\u8BEF\\\\error")})})}function D(){r.$post("api/problem/edit/",{Pid:u.PID,Title:u.Title,Description:u.Description,Input:u.Input,Output:u.Output,SampleInput:u.SampleInput,SampleOutput:u.SampleOutput,LimitTime:u.LimitTime,LimitMemory:u.LimitMemory,Hit:u.Hit,Label:u.Label,Origin:u.Origin,OriginPID:u.OriginPID,ContentType:u.ContentType,Visible:u.Visible}).then(l=>{var o,n;let e=l.data;e.code==0?(r.$log(e),r.elMessage({message:"\u4FEE\u6539\u6210\u529F!",type:"success"})):r.codeProcessor((o=e==null?void 0:e.code)!=null?o:100001,(n=e==null?void 0:e.msg)!=null?n:"\u670D\u52A1\u5668\u9519\u8BEF\\\\error")})}return Vue.onMounted(()=>{var l=r.$route.query.PID;l&&(V.PID=l,V.getProblem(l))}),(l,e)=>{const o=Vue.resolveComponent("el-input"),n=Vue.resolveComponent("el-button"),s=Vue.resolveComponent("el-row"),p=Vue.resolveComponent("el-divider"),f=Vue.resolveComponent("el-input-number"),g=Vue.resolveComponent("el-option"),F=Vue.resolveComponent("el-select"),B=Vue.resolveComponent("el-pagination");return Vue.openBlock(),Vue.createElementBlock("div",O,[y,Vue.createVNode(s,{class:"search"},{default:Vue.withCtx(()=>[L,Vue.createVNode(o,{modelValue:Vue.unref(V).PID,"onUpdate:modelValue":e[0]||(e[0]=t=>Vue.unref(V).PID=t),style:{width:"200px"},onFocus:e[1]||(e[1]=t=>Vue.unref(V).onFocus())},null,8,["modelValue"]),Vue.createVNode(n,{plain:"",onClick:e[2]||(e[2]=t=>Vue.unref(V).getProblem(null))},{default:Vue.withCtx(()=>[Vue.createTextVNode("\u641C\u7D22")]),_:1})]),_:1}),Vue.createVNode(p),Vue.unref(V).isSearched?(Vue.openBlock(),Vue.createElementBlock("div",w,[Vue.createVNode(s,null,{default:Vue.withCtx(()=>[T,Vue.createVNode(o,{modelValue:Vue.unref(u).Title,"onUpdate:modelValue":e[3]||(e[3]=t=>Vue.unref(u).Title=t),class:"problemTitle"},null,8,["modelValue"])]),_:1}),Vue.createVNode(s,null,{default:Vue.withCtx(()=>[S,Vue.createVNode(f,{modelValue:Vue.unref(u).LimitTime,"onUpdate:modelValue":e[4]||(e[4]=t=>Vue.unref(u).LimitTime=t),min:200,max:1e4,step:200,"controls-position":"right"},null,8,["modelValue"]),k,A,Vue.createVNode(f,{modelValue:Vue.unref(u).LimitMemory,"onUpdate:modelValue":e[5]||(e[5]=t=>Vue.unref(u).LimitMemory=t),min:64,max:1024,step:64,"controls-position":"right"},null,8,["modelValue"]),M]),_:1}),Vue.createVNode(s,null,{default:Vue.withCtx(()=>[U,Vue.createVNode(F,{modelValue:Vue.unref(u).Origin,"onUpdate:modelValue":e[6]||(e[6]=t=>Vue.unref(u).Origin=t),class:"m-2",placeholder:"Select"},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(u).Origins,(t,m)=>(Vue.openBlock(),Vue.createBlock(g,{key:t.label,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),Vue.withDirectives(Vue.createVNode(o,{modelValue:Vue.unref(u).OriginPID,"onUpdate:modelValue":e[7]||(e[7]=t=>Vue.unref(u).OriginPID=t),placeholder:Vue.unref(u).OriginPlaceHolder[Vue.unref(u).Origin],class:"originInfo"},null,8,["modelValue","placeholder"]),[[Vue.vShow,Vue.unref(u).Origin!=-1]])]),_:1}),Vue.createVNode(s,null,{default:Vue.withCtx(()=>[R,Vue.createVNode(F,{modelValue:Vue.unref(u).Visible,"onUpdate:modelValue":e[8]||(e[8]=t=>Vue.unref(u).Visible=t),class:"m-2",placeholder:"Select"},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(u).Visibles,(t,m)=>(Vue.openBlock(),Vue.createBlock(g,{key:t.label,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),Vue.createVNode(s,null,{default:Vue.withCtx(()=>[$,Vue.createVNode(o,{modelValue:Vue.unref(u).Label,"onUpdate:modelValue":e[9]||(e[9]=t=>Vue.unref(u).Label=t),placeholder:"\u8BF7\u8F93\u5165\u7684\u6BCF\u4E2A\u6807\u7B7E\u4E4B\u95F4\u7528';'\u9694\u5F00",class:"tagList"},null,8,["modelValue"])]),_:1}),z,Vue.createVNode(s,null,{default:Vue.withCtx(()=>[H,Vue.createVNode(F,{modelValue:Vue.unref(u).ContentType,"onUpdate:modelValue":e[10]||(e[10]=t=>Vue.unref(u).ContentType=t),class:"m-2",placeholder:"Select"},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(u).ContentTypes,(t,m)=>(Vue.openBlock(),Vue.createBlock(g,{key:t.label,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),Vue.unref(u).ContentType==1?(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:0},[Vue.createElementVNode("div",G,[Vue.createVNode(Vue.unref(MdEditorV3),{modelValue:Vue.unref(u).Description,"onUpdate:modelValue":e[11]||(e[11]=t=>Vue.unref(u).Description=t),toolbars:Vue.unref(h).toolbar,"on-upload-img":Vue.unref(u).updateImg},null,8,["modelValue","toolbars","on-upload-img"])]),Vue.createElementVNode("div",null,[K,Vue.createVNode(o,{modelValue:Vue.unref(u).Label,"onUpdate:modelValue":e[12]||(e[12]=t=>Vue.unref(u).Label=t),placeholder:"\u8BF7\u8F93\u5165\u7684\u6BCF\u4E2A\u6807\u7B7E\u4E4B\u95F4\u7528';'\u9694\u5F00"},null,8,["modelValue"])])],64)):(Vue.openBlock(),Vue.createElementBlock("div",q,[Vue.createElementVNode("div",null,[Y,Vue.createVNode(o,{modelValue:Vue.unref(u).Description,"onUpdate:modelValue":e[13]||(e[13]=t=>Vue.unref(u).Description=t),type:"textarea",autosize:"",class:"plainText"},null,8,["modelValue"])]),Vue.createElementVNode("div",null,[j,Vue.createVNode(o,{modelValue:Vue.unref(u).Input,"onUpdate:modelValue":e[14]||(e[14]=t=>Vue.unref(u).Input=t),type:"textarea",autosize:"",class:"plainText"},null,8,["modelValue"])]),Vue.createElementVNode("div",null,[W,Vue.createVNode(o,{modelValue:Vue.unref(u).Output,"onUpdate:modelValue":e[15]||(e[15]=t=>Vue.unref(u).Output=t),type:"textarea",autosize:"",class:"plainText"},null,8,["modelValue"])]),Vue.createElementVNode("div",null,[J,Vue.createVNode(o,{modelValue:Vue.unref(u).SampleInput,"onUpdate:modelValue":e[16]||(e[16]=t=>Vue.unref(u).SampleInput=t),type:"textarea",autosize:"",class:"plainText"},null,8,["modelValue"])]),Vue.createElementVNode("div",null,[Q,Vue.createVNode(o,{modelValue:Vue.unref(u).SampleOutput,"onUpdate:modelValue":e[17]||(e[17]=t=>Vue.unref(u).SampleOutput=t),type:"textarea",autosize:"",class:"plainText"},null,8,["modelValue"])]),Vue.createElementVNode("div",null,[X,Vue.createVNode(o,{modelValue:Vue.unref(u).Hit,"onUpdate:modelValue":e[18]||(e[18]=t=>Vue.unref(u).Hit=t),type:"textarea",autosize:"",class:"plainText"},null,8,["modelValue"])])])),Vue.createElementVNode("div",Z,[Vue.createVNode(n,{type:"danger",plain:"",onClick:e[19]||(e[19]=t=>C())},{default:Vue.withCtx(()=>[Vue.createTextVNode(" \u5220\u9664 ")]),_:1}),Vue.createVNode(n,{plain:"",onClick:e[20]||(e[20]=t=>D())},{default:Vue.withCtx(()=>[Vue.createTextVNode(" \u4FEE\u6539 ")]),_:1})])])):Vue.createCommentVNode("",!0),Vue.createElementVNode("div",ee,[Vue.createVNode(n,{plain:"",onClick:e[21]||(e[21]=t=>Vue.unref(i).showList())},{default:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(Vue.unref(i).isShowed?"\u5173\u95ED\u5217\u8868":"\u663E\u793A\u5217\u8868"),1)]),_:1}),Vue.withDirectives(Vue.createVNode(n,{plain:"",onClick:e[22]||(e[22]=t=>Vue.unref(i).selectAll())},{default:Vue.withCtx(()=>[Vue.createTextVNode(" \u5F53\u9875\u5168\u9009 ")]),_:1},512),[[Vue.vShow,Vue.unref(i).isShowed]]),Vue.withDirectives(Vue.createVNode(n,{plain:"",type:"danger",onClick:e[23]||(e[23]=t=>Vue.unref(i).batchDelete())},{default:Vue.withCtx(()=>[Vue.createTextVNode(" \u6279\u91CF\u5220\u9664 ")]),_:1},512),[[Vue.vShow,Vue.unref(i).isShowed]])]),Vue.withDirectives(Vue.createElementVNode("div",ue,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(i).Data,(t,m)=>(Vue.openBlock(),Vue.createElementBlock("div",{class:Vue.normalizeClass(t.selected?"item itemSelected":"item"),key:m},[Vue.createElementVNode("input",{type:"checkbox",checked:t.selected,onChange:Vue.withModifiers(N=>Vue.unref(i).selectProblem(m),["stop"])},null,40,te),Vue.createElementVNode("div",{class:"title cursor_pointer",onClick:Vue.withModifiers(N=>Vue.unref(V).getProblem(t.PID),["stop"])},Vue.toDisplayString(t.PID)+"\xA0-\xA0"+Vue.toDisplayString(t.Title),9,le)],2))),128))],512),[[Vue.vShow,Vue.unref(i).isShowed]]),Vue.withDirectives(Vue.createElementVNode("div",oe,[Vue.createVNode(B,{background:"",layout:"prev, pager, next","page-size":Vue.unref(c).limit,total:Vue.unref(c).Count,"current-page":Vue.unref(c).currentPage,onCurrentChange:Vue.unref(i).changePage},null,8,["page-size","total","current-page","onCurrentChange"])],512),[[Vue.vShow,Vue.unref(i).isShowed]])])}}});const re=x(ne,[["__scopeId","data-v-11358166"]]);export{re as default};
