import{_ as F}from"./index.7fe3d568.js";const V=n=>(Vue.pushScopeId("data-v-282afd37"),n=n(),Vue.popScopeId(),n),v=V(()=>Vue.createElementVNode("div",{class:"el-upload__text"}," \u4E0A\u4F20 XML \u548C JSON \u683C\u5F0F\u7684\u6587\u4EF6\uFF0C\u70B9\u51FB\u6216\u8005\u62D6\u62FD ",-1)),h=Vue.defineComponent({__name:"UploadProblem",setup(n){const{proxy:a}=Vue.getCurrentInstance();var l=Vue.ref([]),p=Vue.ref([]),s=Vue.reactive({PID:"",isSearched:!1,onFocus(){s.isSearched=!1},getProblem(u){u&&(s.PID=u),a.$get("api/file/"+s.PID).then(o=>{p.value=[],l.value=[];let t=o.data;t.code==0&&(p.value=t.Data),t.Data||a.elMessage({message:"\u6682\u65E0\u6587\u4EF6",type:"info"}),s.isSearched=!0})}});function i(u,o){l.value=[],o.forEach(e=>{l.value.push(e)});let t=o[o.length-1].name;p.value.forEach(e=>{if(t==e.Filename){a.elMessage({message:e.Filename+" \u5DF2\u5B58\u5728\uFF0C\u5C06\u4F1A\u8986\u76D6\u539F\u6587\u4EF6!",type:"warning"});return}})}function d(u,o){l.value=[],o.forEach(t=>{l.value.push(t)}),a.elMessage({message:"\u53D6\u6D88\u4E0A\u4F20 "+u.name,type:"success"})}function _(){if(l.value.length==0){a.elMessage({message:"\u4E0A\u4F20\u5217\u8868\u4E3A\u7A7A\uFF01",type:"warning"});return}ElementPlus.ElMessageBox.confirm("\u786E\u5B9A\u4E0A\u4F20\u5417\uFF1F","\u6CE8\u610F",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{l.value.forEach(u=>{console.log(u),u=u.raw;let o=new FormData;o.append("file",u),a.$post("api/file/problem/",o,1).then(t=>{var c,r;let e=t.data;e.code==0&&a.elMessage({message:u.name+" \u4E0A\u4F20\u6210\u529F!",type:"success"}),a.codeProcessor((c=e==null?void 0:e.code)!=null?c:100001,(r=e==null?void 0:e.msg)!=null?r:"\u670D\u52A1\u5668\u9519\u8BEF\\\\error")})}),a.$refs.upload.clearFiles()})}return Vue.onMounted(()=>{}),(u,o)=>{const t=Vue.resolveComponent("upload-filled"),e=Vue.resolveComponent("el-icon"),c=Vue.resolveComponent("el-upload"),r=Vue.resolveComponent("el-main"),m=Vue.resolveComponent("el-button"),f=Vue.resolveComponent("el-container");return Vue.openBlock(),Vue.createBlock(f,{direction:"vertical"},{default:Vue.withCtx(()=>[Vue.createVNode(r,{class:"Container"},{default:Vue.withCtx(()=>[Vue.createVNode(c,{ref:"upload",class:"uploadJson",drag:"",accept:".xml,.json",multiple:!0,"auto-upload":!1,"on-change":i,"on-remove":d},{default:Vue.withCtx(()=>[Vue.createVNode(e,{class:"el-icon--upload"},{default:Vue.withCtx(()=>[Vue.createVNode(t)]),_:1}),v]),_:1},512)]),_:1}),Vue.createVNode(m,{onClick:_,type:"primary",class:"uploadButton Top"},{default:Vue.withCtx(()=>[Vue.createTextVNode(" \u4E0A\u4F20 ")]),_:1})]),_:1})}}});const E=F(h,[["__scopeId","data-v-282afd37"]]);export{E as default};
