import{I as V,e as g,s as _,_ as f}from"./index.de99a551.js";const d=s=>(Vue.pushScopeId("data-v-44aefdaf"),s=s(),Vue.popScopeId(),s),F={class:"addlist"},B=d(()=>Vue.createElementVNode("span",null,"\u516C\u544A\u6807\u9898",-1)),E=d(()=>Vue.createElementVNode("div",{style:{height:"auto"}},[Vue.createElementVNode("span",null,"\u516C\u544A\u5185\u5BB9")],-1)),A={class:"markdown"},v=Vue.defineComponent({__name:"AddNotice",setup(s){const{proxy:a}=Vue.getCurrentInstance();var i={toolbar:["bold","underline","italic","-","strikeThrough","title","sub","sup","quote","unorderedList","orderedList","-","codeRow","code","link","image","table","mermaid","katex","-","revoke","next","save","=","preview","htmlPreview","catalog"]},o=Vue.reactive({Title:"",Content:"",init(){o.Title="",o.Content=""},updateImg:u=>{if(u.length==0){a.elMessage({message:"\u4E0A\u4F20\u5185\u5BB9\u4E3A\u7A7A\uFF01",type:"warning"});return}ElementPlus.ElMessageBox.confirm("\u786E\u5B9A\u4E0A\u4F20\u5417\uFF1F","\u6CE8\u610F",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{u.forEach(e=>{m(e)})})}});function c(){a.$axios.post("/api/notice/",{title:o.Title,content:o.Content}).then(u=>{var l,t;let e=u.data;e.code==0&&a.elMessage({message:"\u6DFB\u52A0\u516C\u544A\u6210\u529F",type:"success"}),a.codeProcessor((l=e==null?void 0:e.code)!=null?l:100001,(t=e==null?void 0:e.msg)!=null?t:"\u670D\u52A1\u5668\u9519\u8BEF\\\\error")})}function m(u){V.problemImageCompress(u).then(e=>{e.code==0&&g.uploadProblemImage(e.data).then(l=>{var n,r;let t=l.data;if(t.code==0){let p=t.ImageURL;o.Content+=`
![](${_}${p})`,a.elMessage({message:`
              <strong>${u.name}\u4E0A\u4F20\u6210\u529F</strong><br/>
              <span>\u5DF2\u538B\u7F29:${(u.size/1024).toFixed(2)}KB->${(e.data.size/1024).toFixed(2)}KB</span>
            `,type:"success",duration:5e3,dangerouslyUseHTMLString:!0})}a.codeProcessor((n=t==null?void 0:t.code)!=null?n:100001,(r=t==null?void 0:t.msg)!=null?r:"\u670D\u52A1\u5668\u9519\u8BEF\\\\error")})})}return(u,e)=>{const l=Vue.resolveComponent("el-input"),t=Vue.resolveComponent("el-button");return Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,[Vue.createElementVNode("div",F,[Vue.createElementVNode("div",null,[B,Vue.createVNode(l,{modelValue:Vue.unref(o).Title,"onUpdate:modelValue":e[0]||(e[0]=n=>Vue.unref(o).Title=n)},null,8,["modelValue"])]),E,Vue.createElementVNode("div",A,[Vue.createVNode(Vue.unref(MdEditorV3),{modelValue:Vue.unref(o).Content,"onUpdate:modelValue":e[1]||(e[1]=n=>Vue.unref(o).Content=n),toolbars:Vue.unref(i).toolbar,"on-upload-img":Vue.unref(o).updateImg},null,8,["modelValue","toolbars","on-upload-img"])])]),Vue.createVNode(t,{class:"addNoticeButton",type:"primary",onClick:e[2]||(e[2]=n=>c())},{default:Vue.withCtx(()=>[Vue.createTextVNode(" \u6DFB \u52A0 ")]),_:1})],64)}}});const x=f(v,[["__scopeId","data-v-44aefdaf"]]);export{x as default};
