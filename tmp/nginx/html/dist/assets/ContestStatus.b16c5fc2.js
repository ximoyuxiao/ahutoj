import{S as V,a as C}from"./StatusSearch.23f9c4df.js";import{a as g,_ as P}from"./index.de99a551.js";import"./Input.a729bc6b.js";const d=l=>(Vue.pushScopeId("data-v-f88510cc"),l=l(),Vue.popScopeId(),l),_={class:"contestStatus"},B={class:"filterByPID"},L=d(()=>Vue.createElementVNode("div",{class:"title"},"\u6309\u9898\u53F7\u7B5B\u9009",-1)),y={class:"problemBox"},E=["onClick"],F={key:1,class:"error"},v=Vue.defineComponent({__name:"ContestStatus",setup(l){const{proxy:u}=Vue.getCurrentInstance(),I=g();var D={list:null},s=Vue.reactive({correct:!1,CID:-1,Pass:"",search:e=>{t.Page=1,t.PID=e.PID,t.UID=e.UID,t.Lang=e.Lang,t.Result=e.Result,s.update()},update:()=>{D.list=u.elLoading({node:document.getElementsByClassName("statusList")[0]});let e={};if(!s.CID||s.CID==-1){s.correct=!1;return}e.CID=s.CID,t.Page&&(e.Page=t.Page-1),t.Limit&&(e.Limit=t.Limit),t.PID&&(e.PID=t.PID),t.UID&&t.UID!=""&&(e.UID=t.UID),t.Lang&&t.Lang>0&&(e.Lang=t.Lang),t.Result&&t.Result!="\u4E0D\u9650"&&(e.Result=t.Result),u.$get("api/submit/status",e).then(o=>{var n,a;let i=o.data;i.code==0&&(t.Count=i.Count,f.list=i.Data,s.syncUrl(t)),u.codeProcessor((n=i==null?void 0:i.code)!=null?n:100001,(a=i==null?void 0:i.msg)!=null?a:"\u670D\u52A1\u5668\u9519\u8BEF\\\\error"),D.list.close()})},syncUrl:e=>{let o={};s.CID&&(o.CID=s.CID),e.Limit&&(o.Limit=e.Limit),e.Page&&(o.Page=e.Page),e.Limit&&(o.Limit=e.Limit),e.PID&&(o.PID=e.PID),e.UID&&e.UID!=""&&(o.UID=e.UID),e.Lang&&e.Lang>0&&(o.Lang=e.Lang),e.Result&&e.Result!="\u4E0D\u9650"&&(o.Result=e.Result),u.$router.replace({path:"/ContestStatus",query:o})}}),t=Vue.reactive({PID:null,UID:"",Lang:-1,Result:"\u4E0D\u9650",Count:0,Page:1,Limit:20,queryPID:e=>{t.PID=e,s.update()},PIDSetter:e=>{t.PID=e},UIDSetter:e=>{t.UID=e}}),r=Vue.reactive({CID:null,Pass:null,info:{Data:[],BeginTime:0,CID:0,Type:1,Description:"",EndTime:0,IsPublic:1,Pass:"",Size:0,Title:"",UID:""},copy(e){let o=e.Problems.split(",");for(let i in o)for(let n in e.Data)if(o[i]===e.Data[n].PID+""){let a={PID:e.Data[n].PID,Title:e.Data[n].Title,ACNum:e.Data[n].ACNum,SubmitNum:e.Data[n].SubmitNum};r.info.Data.push(a);break}r.info.BeginTime=e.BeginTime,r.info.CID=e.CID,r.info.Type=e.Type,r.info.Description=e.Description,r.info.EndTime=e.EndTime,r.info.IsPublic=e.IsPublic,r.info.Pass=e.Pass,r.info.Size=e.Size,r.info.Title=e.Title,r.info.UID=e.UID},checkContest:async(e,o)=>{await u.$get("api/contest/"+e,{Pass:o}).then(i=>{var a,c;let n=i.data;n.code==0&&(r.copy(n),s.correct=!0),u.codeProcessor((a=n==null?void 0:n.code)!=null?a:100001,(c=n==null?void 0:n.msg)!=null?c:"\u670D\u52A1\u5668\u9519\u8BEF\\\\error")})},backToContest:()=>{let e={CID:null};if(u.$route.query.CID)e.CID=u.$route.query.CID;else{u.elMessage({message:"\u6570\u636E\u5F02\u5E38\uFF0C\u8BF7\u91CD\u65B0\u8FDB\u5165\u6BD4\u8D5B\u754C\u9762",type:"warning"});return}u.$router.push({name:"Contest",params:e})}}),f=Vue.reactive({list:[]});async function m(){var n;let e=Number(u.$route.query.CID);if(!e){u.elMessage({message:"\u8DF3\u8F6C\u5730\u5740\u9519\u8BEF\uFF0C\u8BF7\u91CD\u8BD5",type:"warning"});return}u.$route.query.Page&&(t.Page=Number(u.$route.query.Page)),u.$route.query.Limit&&(t.Limit=Number(u.$route.query.Limit)),typeof u.$route.query.PID<"u"&&(t.PID=Number(u.$route.query.PID)),typeof u.$route.query.UID<"u"&&(t.UID=u.$route.query.UID),typeof u.$route.query.Result<"u"&&(t.Result=u.$route.query.Result),typeof u.$route.query.Lang<"u"&&(t.Lang=Number(u.$route.query.Lang));let o=I.getContestRouterData(e),i=(n=o==null?void 0:o.Pass)!=null?n:"";s.CID=e,s.Pass=i,await r.checkContest(e,i),s.correct&&s.update()}return Vue.provide("config",s),Vue.provide("query",t),Vue.onMounted(()=>{m()}),(e,o)=>{const i=Vue.resolveComponent("Back"),n=Vue.resolveComponent("el-icon"),a=Vue.resolveComponent("el-result");return Vue.openBlock(),Vue.createElementBlock("div",_,[Vue.unref(s).correct?(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:0},[Vue.createElementVNode("div",{class:"contestID cursor_pointer",onClick:o[0]||(o[0]=(...c)=>Vue.unref(r).backToContest&&Vue.unref(r).backToContest(...c))},[Vue.createVNode(n,{size:"32px"},{default:Vue.withCtx(()=>[Vue.createVNode(i)]),_:1}),Vue.createElementVNode("div",null," #"+Vue.toDisplayString(Vue.unref(s).CID)+"\xA0-\xA0"+Vue.toDisplayString(Vue.unref(r).info.Title),1)]),Vue.createVNode(V,{query:Vue.unref(t)},null,8,["query"]),Vue.createElementVNode("div",B,[L,Vue.createElementVNode("div",y,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(r).info.Data,(c,p)=>(Vue.openBlock(),Vue.createElementBlock("div",{class:"problem cursor_pointer",key:p,onClick:S=>Vue.unref(t).queryPID(c.PID)},Vue.toDisplayString(c.PID),9,E))),128))])]),Vue.createVNode(C,{data:Vue.unref(f).list,isContestStatus:!0},null,8,["data"])],64)):(Vue.openBlock(),Vue.createElementBlock("div",F,[Vue.createVNode(a,{icon:"warning",title:"\u6570\u636E\u5F02\u5E38","sub-title":"\u8BF7\u786E\u4FDD\u5F53\u524D\u4E3A\u6B63\u5E38\u8DF3\u8F6C\uFF0C\u6216\u8005\u8054\u7CFB\u7F51\u7AD9\u8FD0\u7EF4\u68C0\u67E5\u3002"})]))])}}});const N=P(v,[["__scopeId","data-v-f88510cc"]]);export{N as default};
