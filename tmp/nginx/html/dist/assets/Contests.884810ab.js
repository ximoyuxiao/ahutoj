import{a as k,_ as y}from"./index.de99a551.js";const T={class:"contest"},B={class:"top",ref:"searchResult"},E={class:"list"},N={class:"goingFlag"},D={key:0,class:"waiting",style:{"background-color":"#009acd"}},w={key:0,class:"going",style:{"background-color":"#5ebd00"}},x={key:1,class:"finish",style:{"background-color":"#969696"}},P=["onClick"],b={class:"cidFlag artFont bold"},F={class:"title artFont bold"},I={key:0,class:"ctype ctypeICPC bold"},S={key:1,class:"ctype ctypeOI bold"},A={class:"contestInfo interval"},L={class:"pagination"},$={class:"notFound"},U=Vue.defineComponent({__name:"Contests",setup(q){const{proxy:t}=Vue.getCurrentInstance(),V=k();var c=Vue.reactive({list:[]}),e=Vue.reactive({Count:0,currentPage:1,limit:20,loading:null,serverTime:Date.now(),init(){this.Count=0,this.currentPage=1,this.limit=20,this.loading=null,this.serverTime=Date.now()},changePage:o=>{e.currentPage=o,_(),l()}});function l(){e.loading=t.elLoading({node:t.$refs.searchResult}),t.$get("api/contest/list?Page="+(e.currentPage-1)+"&Limit="+e.limit).then(o=>{var i,r;let n=o.data;n.code==0&&(e.Count=n.Size,c.list=n.Data),e.loading.close(),t.codeProcessor((i=n==null?void 0:n.code)!=null?i:100001,(r=n==null?void 0:n.msg)!=null?r:"\u670D\u52A1\u5668\u9519\u8BEF\\\\error")}),t.getServerTime().then(o=>{let n=Date.now();o.time==null||Math.abs(o.time-n)<1500||(e.serverTime=o.time)})}function d(o){if(o.BeginTime>e.serverTime){t.elNotification({message:"\u7ADE\u8D5B\u8FD8\u672A\u5F00\u59CB\u54E6",type:"warning",duration:2500});return}V.setContestRouterData(o.CID,o.IsPublic),t.$router.push({name:"Contest",params:{CID:o.CID}})}function _(){t.$router.replace({path:"/Contests",query:{Page:e.currentPage,Limit:e.limit}})}return Vue.onMounted(()=>{t.$route.query.Page&&(e.currentPage=t.$route.query.Page-0),t.$route.query.Limit&&(e.limit=t.$route.query.Limit-0),l()}),(o,n)=>{const i=Vue.resolveComponent("Unlock"),r=Vue.resolveComponent("el-icon"),s=Vue.resolveComponent("row"),p=Vue.resolveComponent("Lock"),m=Vue.resolveComponent("el-row"),a=Vue.resolveComponent("el-divider"),g=Vue.resolveComponent("el-pagination"),v=Vue.resolveComponent("el-empty"),C=Vue.resolveComponent("el-main"),h=Vue.resolveComponent("el-container");return Vue.openBlock(),Vue.createBlock(h,{class:"mainContainer"},{default:Vue.withCtx(()=>[Vue.createVNode(C,{class:"main"},{default:Vue.withCtx(()=>[Vue.createElementVNode("div",T,[Vue.withDirectives(Vue.createElementVNode("div",B,[Vue.createElementVNode("div",E,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(c).list,(u,f)=>(Vue.openBlock(),Vue.createElementBlock("div",{class:"item",key:f},[Vue.createElementVNode("div",N,[u.BeginTime>Vue.unref(e).serverTime?(Vue.openBlock(),Vue.createElementBlock("div",D)):(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:1},[u.EndTime>Vue.unref(e).serverTime?(Vue.openBlock(),Vue.createElementBlock("div",w)):(Vue.openBlock(),Vue.createElementBlock("div",x))],64))]),Vue.createElementVNode("div",{class:"content cursor_pointer intervalVertical",onClick:()=>d(u)},[Vue.createVNode(m,null,{default:Vue.withCtx(()=>[Vue.createElementVNode("div",b,"\xA0#"+Vue.toDisplayString(u.CID)+"\xA0",1),Vue.createElementVNode("div",F,Vue.toDisplayString(u.Title),1),u.Type==1?(Vue.openBlock(),Vue.createElementBlock("div",I," ICPC ")):(Vue.openBlock(),Vue.createElementBlock("div",S," OI ")),u.IsPublic==1?(Vue.openBlock(),Vue.createBlock(s,{key:2,class:"openType openTypeEnabled bold"},{default:Vue.withCtx(()=>[Vue.createVNode(r,null,{default:Vue.withCtx(()=>[Vue.createVNode(i)]),_:1}),Vue.createTextVNode(" \u516C\u5F00 ")]),_:1})):(Vue.openBlock(),Vue.createBlock(s,{key:3,class:"openType openTypedisabled bold"},{default:Vue.withCtx(()=>[Vue.createVNode(r,null,{default:Vue.withCtx(()=>[Vue.createVNode(p)]),_:1}),Vue.createTextVNode(" \u52A0\u5BC6 ")]),_:1}))]),_:2},1024),Vue.createElementVNode("div",A,[Vue.createTextVNode(" \u521B\u5EFA\u8005\uFF1A"+Vue.toDisplayString(u.UID)+" ",1),Vue.createVNode(a,{direction:"vertical"})]),Vue.createTextVNode(" "+Vue.toDisplayString(Vue.unref(t).Utils.TimeTools.timestampToTime(u.BeginTime))+" - "+Vue.toDisplayString(Vue.unref(t).Utils.TimeTools.timestampToTime(u.EndTime))+" ",1),Vue.createVNode(a,{direction:"vertical"}),Vue.createTextVNode(" \u65F6\u957F\uFF1A "+Vue.toDisplayString(Vue.unref(t).Utils.TimeTools.timeIntervalToTime(u.EndTime,u.BeginTime)),1)],8,P)]))),128))]),Vue.createElementVNode("div",L,[Vue.createVNode(g,{background:"",layout:"prev, pager, next","page-size":Vue.unref(e).limit,total:Vue.unref(e).Count,"current-page":Vue.unref(e).currentPage,onCurrentChange:Vue.unref(e).changePage},null,8,["page-size","total","current-page","onCurrentChange"])])],512),[[Vue.vShow,Vue.unref(c).list.length!=0]]),Vue.withDirectives(Vue.createElementVNode("div",$,[Vue.createVNode(v,{description:"\u672A\u627E\u5230\u7ED3\u679C"})],512),[[Vue.vShow,Vue.unref(c).list.length==0]])])]),_:1})]),_:1})}}});const R=y(U,[["__scopeId","data-v-0eb550a5"]]);export{R as default};
