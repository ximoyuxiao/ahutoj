import{u as E,a as C,_ as L}from"./index.de99a551.js";const r=d=>(Vue.pushScopeId("data-v-2d77105e"),d=d(),Vue.popScopeId(),d),B={class:"Home"},k={class:"error"},D={class:"notice"},N={class:"left"},w={class:"noticeItem"},S=["onClick"],y={class:"rightTime"},F={class:"right"},I={class:"noticeItem"},x={key:0,class:"item"},U={style:{display:"inline"}},z={style:{display:"inline-block"},class:"title"},P={class:"rightTime"},$=r(()=>Vue.createElementVNode("hr",null,null,-1)),b=r(()=>Vue.createElementVNode("br",null,null,-1)),A={key:1,class:"nothing"},H={class:"contestsPreview"},q={class:"left"},M=r(()=>Vue.createElementVNode("div",null,"\u6B63 \u8FDB \u884C",-1)),R=[M],G=r(()=>Vue.createElementVNode("div",null,"\u7B49 \u5F85 \u4E2D",-1)),J=[G],O=r(()=>Vue.createElementVNode("div",null,"\u5DF2 \u7ED3 \u675F",-1)),Y=[O],Z={class:"right"},j={class:"liveContests"},K=["onClick"],Q={class:"time"},W={class:"waitingContests"},X={class:"title cursor_pointer"},ee={class:"time"},te={class:"overContests"},oe=["onClick"],ie={class:"time"},se=r(()=>Vue.createElementVNode("br",null,null,-1)),ne=r(()=>Vue.createElementVNode("div",{id:"hint",style:{"text-align":"center"}},[Vue.createTextVNode(" AHUT-OJ \u65B0\u529F\u80FD\u63D0\u6848/BUG\u53CD\u9988/\u4FEE\u6539\u5EFA\u8BAE "),Vue.createElementVNode("a",{href:"https://docs.qq.com/form/page/DY0FDckZ3RlB0Uktq"},"\u70B9\u6B64\u524D\u5F80")],-1)),ue=Vue.defineComponent({__name:"Home",setup(d){const{proxy:n}=Vue.getCurrentInstance(),_=E(),p=C();var u=Vue.reactive({time:0,timer:null,isError:!1,loads:{getSystemTimeLoader:null,getContestLoader:null,init(){this.getSystemTimeLoader&&this.getSystemTimeLoader.close(),this.getContestLoader&&this.getContestLoader.close(),this.getSystemTimeLoader=null,this.getContestLoader=null}}}),o=Vue.reactive({liveList:[],waitingList:[],overList:[],showListIndex:1,init(){o.liveList=[],o.waitingList=[],o.overList=[]},show:i=>{o.showListIndex=i}}),s=Vue.reactive({noticeList:[],Selected:0,init(){s.noticeList=[],s.Selected=0},copy(i){s.Selected=0;for(let t in i){let c={ID:i[t].ID,UID:i[t].UID,Title:i[t].Title,Content:i[t].Content,CreateTime:i[t].CreatedTime,UpdateTime:i[t].UpdatedTime};s.noticeList.push(c)}console.log(s.noticeList)},SelectIdx(i){s.Selected=i}});async function T(){u.loads.init(),await v(),f(),g()}async function v(){u.loads.getSystemTimeLoader=n.elLoading({node:document.getElementsByClassName("Home")[0],text:"\u540C\u6B65\u7CFB\u7EDF\u65F6\u95F4"}),await n.getServerTime().then(i=>{let t=Date.now();if(i.time==null||Math.abs(i.time-t)<1500){u.time=t;return}u.time=i.time,u.time||(u.isError=!0),n.codeProcessor(i.code)}),u.loads.getSystemTimeLoader.close()}function f(){n.$get("api/contest/list",{Limit:50,Page:0}).then(i=>{var c,V;let t=i.data;if(t.code==0){let a=u.time;for(o.init(),t.Data.forEach(e=>{e.BeginTime>a?o.waitingList.length<5&&o.waitingList.push(e):e.EndTime>a?o.liveList.length<10&&o.liveList.push(e):o.overList.length<5&&o.overList.push(e)});o.waitingList.length<5;)o.waitingList.push({Title:""});for(;o.liveList.length<5;)o.liveList.push({Title:""});for(;o.overList.length<5;)o.overList.push({Title:""})}n.codeProcessor((c=t==null?void 0:t.code)!=null?c:100001,(V=t==null?void 0:t.msg)!=null?V:"\u670D\u52A1\u5668\u9519\u8BEF\\\\error")})}function g(){n.$get("/api/notices").then(i=>{let t=i.data;t.code==0&&(console.log(t),s.copy(t.data))})}var m={contest:i=>{p.setContestRouterData(i.CID,i.IsPublic),n.$router.push({name:"Contest",params:{CID:i.CID}})}};return Vue.onMounted(()=>{T()}),(i,t)=>{const c=Vue.resolveComponent("el-empty"),V=Vue.resolveComponent("Lock"),a=Vue.resolveComponent("el-icon");return Vue.openBlock(),Vue.createElementBlock("div",B,[Vue.withDirectives(Vue.createElementVNode("div",k,[Vue.createVNode(c,{description:"\u6570\u636E\u540C\u6B65\u5931\u8D25,\u53EF\u80FD\u662F\u7F51\u7EDC\u95EE\u9898\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5\uFF0C\u6216\u8005\u8054\u7CFB\u7F51\u7AD9\u8FD0\u7EF4\u4EBA\u5458\u3002"})],512),[[Vue.vShow,Vue.unref(u).isError]]),Vue.createElementVNode("div",D,[Vue.createElementVNode("div",N,[Vue.createElementVNode("div",w,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(s).noticeList,(e,l)=>(Vue.openBlock(),Vue.createElementBlock("div",{class:Vue.normalizeClass([e.Title!=""?"item":"nothing","cursor_pointer"]),key:l,onClick:h=>Vue.unref(s).SelectIdx(l)},[Vue.createElementVNode("div",null,[Vue.createTextVNode(Vue.toDisplayString(e.Title),1),Vue.createElementVNode("span",y,Vue.toDisplayString(e.CreateTime?Vue.unref(n).Utils.TimeTools.timestampToTime(e.CreateTime):""),1)])],10,S))),128))])]),Vue.createElementVNode("div",F,[Vue.createElementVNode("div",I,[Vue.unref(s).noticeList[Vue.unref(s).Selected]?(Vue.openBlock(),Vue.createElementBlock("div",x,[Vue.createElementVNode("div",U,[Vue.createElementVNode("h3",z,Vue.toDisplayString(Vue.unref(s).noticeList[Vue.unref(s).Selected].Title),1),Vue.createElementVNode("span",P,Vue.toDisplayString(Vue.unref(s).noticeList[Vue.unref(s).Selected].CreateTime?Vue.unref(n).Utils.TimeTools.timestampToTime(Vue.unref(s).noticeList[Vue.unref(s).Selected].CreateTime):""),1)]),$,b,Vue.createVNode(Vue.unref(MdEditorV3),{class:"markDown",modelValue:Vue.unref(s).noticeList[Vue.unref(s).Selected].Content,"onUpdate:modelValue":t[0]||(t[0]=e=>Vue.unref(s).noticeList[Vue.unref(s).Selected].Content=e),theme:Vue.unref(_).theme>0?"light":"dark","preview-only":""},null,8,["modelValue","theme"])])):(Vue.openBlock(),Vue.createElementBlock("div",A))])])]),Vue.withDirectives(Vue.createElementVNode("div",H,[Vue.createElementVNode("div",q,[Vue.createElementVNode("div",{class:Vue.normalizeClass((Vue.unref(o).showListIndex==1?"selected ":"")+"liveContests cursor_pointer"),onClick:t[1]||(t[1]=e=>Vue.unref(o).show(1))},R,2),Vue.createElementVNode("div",{class:Vue.normalizeClass((Vue.unref(o).showListIndex==2?"selected ":"")+"waitingContests cursor_pointer"),onClick:t[2]||(t[2]=e=>Vue.unref(o).show(2))},J,2),Vue.createElementVNode("div",{class:Vue.normalizeClass((Vue.unref(o).showListIndex==3?"selected ":"")+"overContests cursor_pointer"),onClick:t[3]||(t[3]=e=>Vue.unref(o).show(3))},Y,2)]),Vue.createElementVNode("div",Z,[Vue.withDirectives(Vue.createElementVNode("div",j,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(o).liveList,(e,l)=>(Vue.openBlock(),Vue.createElementBlock("div",{class:Vue.normalizeClass(e.Title!=""?"item":"nothing"),key:l},[Vue.createElementVNode("div",{class:"title cursor_pointer",onClick:h=>{Vue.unref(m).contest(e)}},[e.IsPublic==-1&&e.Title?(Vue.openBlock(),Vue.createBlock(a,{key:0,color:"#ff3300",size:"22px"},{default:Vue.withCtx(()=>[Vue.createVNode(V)]),_:1})):Vue.createCommentVNode("",!0),Vue.createTextVNode(" "+Vue.toDisplayString(e.Title),1)],8,K),Vue.createElementVNode("div",Q,Vue.toDisplayString(e.BeginTime?Vue.unref(n).Utils.TimeTools.timestampToTime(e.BeginTime)+" - ":"")+" "+Vue.toDisplayString(e.EndTime?Vue.unref(n).Utils.TimeTools.timestampToTime(e.EndTime):""),1)],2))),128))],512),[[Vue.vShow,Vue.unref(o).showListIndex==1]]),Vue.withDirectives(Vue.createElementVNode("div",W,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(o).waitingList,(e,l)=>(Vue.openBlock(),Vue.createElementBlock("div",{class:Vue.normalizeClass(e.Title!=""?"item":"nothing"),key:l},[Vue.createElementVNode("div",X,[e.IsPublic==-1&&e.Title?(Vue.openBlock(),Vue.createBlock(a,{key:0,color:"#ff3300",size:"22px"},{default:Vue.withCtx(()=>[Vue.createVNode(V)]),_:1})):Vue.createCommentVNode("",!0),Vue.createTextVNode(" "+Vue.toDisplayString(e.Title),1)]),Vue.createElementVNode("div",ee,Vue.toDisplayString(e.BeginTime?Vue.unref(n).Utils.TimeTools.timestampToTime(e.BeginTime)+" - ":"")+" "+Vue.toDisplayString(e.EndTime?Vue.unref(n).Utils.TimeTools.timestampToTime(e.EndTime):""),1)],2))),128))],512),[[Vue.vShow,Vue.unref(o).showListIndex==2]]),Vue.withDirectives(Vue.createElementVNode("div",te,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(o).overList,(e,l)=>(Vue.openBlock(),Vue.createElementBlock("div",{class:Vue.normalizeClass(e.Title!=""?"item":"nothing"),key:l},[Vue.createElementVNode("div",{class:"title cursor_pointer",onClick:h=>{Vue.unref(m).contest(e)}},[e.IsPublic==-1&&e.Title?(Vue.openBlock(),Vue.createBlock(a,{key:0,color:"#ff3300",size:"22px"},{default:Vue.withCtx(()=>[Vue.createVNode(V)]),_:1})):Vue.createCommentVNode("",!0),Vue.createTextVNode(" "+Vue.toDisplayString(e.Title),1)],8,oe),Vue.createElementVNode("div",ie,Vue.toDisplayString(e.BeginTime?Vue.unref(n).Utils.TimeTools.timestampToTime(e.BeginTime)+" - ":"")+" "+Vue.toDisplayString(e.EndTime?Vue.unref(n).Utils.TimeTools.timestampToTime(e.EndTime):""),1)],2))),128))],512),[[Vue.vShow,Vue.unref(o).showListIndex==3]])])],512),[[Vue.vShow,!Vue.unref(u).isError]]),se,ne])}}});const re=L(ue,[["__scopeId","data-v-2d77105e"]]);export{re as default};
